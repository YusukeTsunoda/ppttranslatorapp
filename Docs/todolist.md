# タスクリスト

## 優先度: 高
- [ ] マウスクリックが動作しない問題の修正
- [ ] 翻訳履歴機能の実装
- [x] チーム管理機能の実装
- [x] アクティビティログの実装
- [x] エラーハンドリングの改善
- [ ] パフォーマンス最適化

## 優先度: 中
- [ ] ダークモードの実装
- [ ] バッチ翻訳機能の実装
- [x] プロフィール編集機能の実装
- [ ] API連携機能の実装
- [ ] 請求書生成機能の実装
- [ ] 統計・分析機能の実装

## 優先度: 低
- [ ] ブログ機能の実装
- [ ] ドキュメント機能の実装
- [ ] 多言語対応の拡充
- [ ] カスタムテーマ機能
- [ ] APIドキュメントの整備
- [ ] E2Eテストの拡充

## バグ修正
- [ ] ログイン後のイベント伝播問題
- [ ] ファイルアップロード時のエラー処理
- [ ] 翻訳テキストの位置ずれ
- [ ] セッション切れの処理改善
- [ ] メモリリークの対応

## 技術的負債
- [x] NextAuth.js v5への移行
- [x] 型定義の整備
- [x] コンポーネントのリファクタリング
- [ ] テストカバレッジの向上
- [x] ログ出力の統一

## セキュリティ対策
- [x] CSRF対策の強化
- [x] レート制限の実装
- [x] ファイルアクセス制御の改善
- [x] セッション管理の強化
- [x] 監査ログの拡充

## データベース改善
- [x] ENUM型の導入
  - [x] ユーザーロール
  - [x] サブスクリプションステータス
  - [x] ファイルステータス
  - [x] 言語コード
- [x] インデックスの最適化
  - [x] 検索頻度の高いカラムの特定
  - [x] 複合インデックスの設計
  - [x] インデックスのパフォーマンス計測
- [x] トリガーの実装
  - [x] updated_at自動更新
  - [x] 監査ログ自動記録
  - [x] 古いデータの自動アーカイブ
- [ ] RLS（Row Level Security）の実装
  - [ ] テーブルごとのポリシー設定
  - [ ] ロールベースのアクセス制御
  - [ ] 監査ログの自動記録

## Supabase連携
### Phase 1: 基本設定とデータベース移行
- [ ] Supabase プロジェクトのセットアップ
  - [ ] プロジェクト作成
  - [ ] 環境変数の設定
  - [ ] Vercelとの連携設定

- [ ] データベーススキーマの移行
  - [ ] ENUMの定義
    - [ ] ActivityAction
    - [ ] SubscriptionStatus
    - [ ] FileStatus
    - [ ] LanguageCode
    - [ ] UserRole
  - [ ] テーブルの作成
    - [ ] users
    - [ ] teams
    - [ ] team_members
    - [ ] subscriptions
    - [ ] activity_logs
    - [ ] files
    - [ ] slides
    - [ ] texts
    - [ ] translations
    - [ ] translation_memory
    - [ ] glossary
  - [ ] リレーションの設定
  - [ ] インデックスの作成
  - [ ] RLSポリシーの設定

### Phase 2: 認証・認可の実装
- [ ] Supabase Auth設定
  - [ ] メール認証の設定
  - [ ] Google認証の設定
  - [ ] パスワードリセットフロー
  - [ ] 招待フロー
- [ ] RLSポリシーの実装
  - [ ] チームベースのアクセス制御
  - [ ] ロールベースの権限管理
  - [ ] ファイルアクセス制御

### Phase 3: ストレージ実装
- [ ] Supabase Storageバケットの設定
  - [ ] PPTXファイル用バケット
  - [ ] スライド画像用バケット
  - [ ] 一時ファイル用バケット
- [ ] ストレージポリシーの設定
  - [ ] アップロード制限
  - [ ] アクセス制御
  - [ ] 有効期限設定
- [ ] ファイル管理機能の実装
  - [ ] アップロード処理
  - [ ] ダウンロード処理
  - [ ] 一時URL生成
  - [ ] 自動クリーンアップ

### Phase 4: リアルタイム機能実装
- [ ] Supabase Realtimeの設定
  - [ ] チャンネル設定
  - [ ] イベント定義
- [ ] リアルタイム更新の実装
  - [ ] 翻訳状態の同期
  - [ ] チーム活動の同期
  - [ ] ファイル処理状態の同期
- [ ] プレゼンス機能の実装
  - [ ] オンラインステータス
  - [ ] 同時編集管理

### Phase 5: Edge Functions実装
- [ ] Webhook処理の実装
  - [ ] Stripe Webhook
  - [ ] ファイル処理Webhook
- [ ] バッチ処理の実装
  - [ ] 定期クリーンアップ
  - [ ] 使用統計集計
  - [ ] バックアップ処理
- [ ] カスタムAPI実装
  - [ ] 翻訳処理API
  - [ ] ファイル変換API
  - [ ] 統計レポートAPI

### Phase 6: パフォーマンスとモニタリング
- [ ] キャッシュ戦略の実装
  - [ ] クエリキャッシュ
  - [ ] ストレージキャッシュ
  - [ ] Edge Caching
- [ ] モニタリングの設定
  - [ ] パフォーマンスモニタリング
  - [ ] エラー監視
  - [ ] 使用量監視
- [ ] バックアップと復旧
  - [ ] 自動バックアップ
  - [ ] ポイントインタイム復旧
  - [ ] 障害復旧手順

### Phase 7: デプロイメントとCI/CD
- [ ] Vercelデプロイメント設定
  - [ ] 環境変数設定
  - [ ] ビルド設定
  - [ ] デプロイメントフック
- [ ] CI/CDパイプライン構築
  - [ ] テスト自動化
  - [ ] デプロイ自動化
  - [ ] マイグレーション自動化
