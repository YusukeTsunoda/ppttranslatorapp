86e17ea56b1a9c91762c7e6f505c5871
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
var _ariaAbstractRoles = _interopRequireDefault(require("./etc/roles/ariaAbstractRoles"));
var _ariaLiteralRoles = _interopRequireDefault(require("./etc/roles/ariaLiteralRoles"));
var _ariaDpubRoles = _interopRequireDefault(require("./etc/roles/ariaDpubRoles"));
var _ariaGraphicsRoles = _interopRequireDefault(require("./etc/roles/ariaGraphicsRoles"));
var _iterationDecorator = _interopRequireDefault(require("./util/iterationDecorator"));
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _defineProperty(obj, key, value) {
    if (key in obj) {
        Object.defineProperty(obj, key, {
            value: value,
            enumerable: true,
            configurable: true,
            writable: true
        });
    } else {
        obj[key] = value;
    }
    return obj;
}
function _createForOfIteratorHelper(o, allowArrayLike) {
    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
    if (!it) {
        if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
            if (it) o = it;
            var i = 0;
            var F = function F() {};
            return {
                s: F,
                n: function n() {
                    if (i >= o.length) return {
                        done: true
                    };
                    return {
                        done: false,
                        value: o[i++]
                    };
                },
                e: function e(_e2) {
                    throw _e2;
                },
                f: F
            };
        }
        throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var normalCompletion = true, didErr = false, err;
    return {
        s: function s() {
            it = it.call(o);
        },
        n: function n() {
            var step = it.next();
            normalCompletion = step.done;
            return step;
        },
        e: function e(_e3) {
            didErr = true;
            err = _e3;
        },
        f: function f() {
            try {
                if (!normalCompletion && it.return != null) it.return();
            } finally{
                if (didErr) throw err;
            }
        }
    };
}
function _slicedToArray(arr, i) {
    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();
}
function _nonIterableRest() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(o);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}
function _arrayLikeToArray(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++){
        arr2[i] = arr[i];
    }
    return arr2;
}
function _iterableToArrayLimit(arr, i) {
    var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"];
    if (_i == null) return;
    var _arr = [];
    var _n = true;
    var _d = false;
    var _s, _e;
    try {
        for(_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true){
            _arr.push(_s.value);
            if (i && _arr.length === i) break;
        }
    } catch (err) {
        _d = true;
        _e = err;
    } finally{
        try {
            if (!_n && _i["return"] != null) _i["return"]();
        } finally{
            if (_d) throw _e;
        }
    }
    return _arr;
}
function _arrayWithHoles(arr) {
    if (Array.isArray(arr)) return arr;
}
var roles = [].concat(_ariaAbstractRoles.default, _ariaLiteralRoles.default, _ariaDpubRoles.default, _ariaGraphicsRoles.default);
roles.forEach(function(_ref) {
    var _ref2 = _slicedToArray(_ref, 2), roleDefinition = _ref2[1];
    // Conglomerate the properties
    var _iterator = _createForOfIteratorHelper(roleDefinition.superClass), _step;
    try {
        for(_iterator.s(); !(_step = _iterator.n()).done;){
            var superClassIter = _step.value;
            var _iterator2 = _createForOfIteratorHelper(superClassIter), _step2;
            try {
                var _loop = function _loop() {
                    var superClassName = _step2.value;
                    var superClassRoleTuple = roles.find(function(_ref3) {
                        var _ref4 = _slicedToArray(_ref3, 1), name = _ref4[0];
                        return name === superClassName;
                    });
                    if (superClassRoleTuple) {
                        var superClassDefinition = superClassRoleTuple[1];
                        for(var _i2 = 0, _Object$keys = Object.keys(superClassDefinition.props); _i2 < _Object$keys.length; _i2++){
                            var prop = _Object$keys[_i2];
                            if (// $FlowIssue Accessing the hasOwnProperty on the Object prototype is fine.
                            !Object.prototype.hasOwnProperty.call(roleDefinition.props, prop)) {
                                Object.assign(roleDefinition.props, _defineProperty({}, prop, superClassDefinition.props[prop]));
                            }
                        }
                    }
                };
                for(_iterator2.s(); !(_step2 = _iterator2.n()).done;){
                    _loop();
                }
            } catch (err) {
                _iterator2.e(err);
            } finally{
                _iterator2.f();
            }
        }
    } catch (err) {
        _iterator.e(err);
    } finally{
        _iterator.f();
    }
});
var rolesMap = {
    entries: function entries() {
        return roles;
    },
    forEach: function forEach(fn) {
        var thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
        var _iterator3 = _createForOfIteratorHelper(roles), _step3;
        try {
            for(_iterator3.s(); !(_step3 = _iterator3.n()).done;){
                var _step3$value = _slicedToArray(_step3.value, 2), key = _step3$value[0], values = _step3$value[1];
                fn.call(thisArg, values, key, roles);
            }
        } catch (err) {
            _iterator3.e(err);
        } finally{
            _iterator3.f();
        }
    },
    get: function get(key) {
        var item = roles.find(function(tuple) {
            return tuple[0] === key ? true : false;
        });
        return item && item[1];
    },
    has: function has(key) {
        return !!rolesMap.get(key);
    },
    keys: function keys() {
        return roles.map(function(_ref5) {
            var _ref6 = _slicedToArray(_ref5, 1), key = _ref6[0];
            return key;
        });
    },
    values: function values() {
        return roles.map(function(_ref7) {
            var _ref8 = _slicedToArray(_ref7, 2), values = _ref8[1];
            return values;
        });
    }
};
var _default = (0, _iterationDecorator.default)(rolesMap, rolesMap.entries());
exports.default = _default;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXN1a2V0c3Vub2RhL0RvY3VtZW50cy9jdXJzb3IvcHB0dHJhbnNsYXRvcmFwcC9ub2RlX21vZHVsZXMvYXJpYS1xdWVyeS9saWIvcm9sZXNNYXAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX2FyaWFBYnN0cmFjdFJvbGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ldGMvcm9sZXMvYXJpYUFic3RyYWN0Um9sZXNcIikpO1xudmFyIF9hcmlhTGl0ZXJhbFJvbGVzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ldGMvcm9sZXMvYXJpYUxpdGVyYWxSb2xlc1wiKSk7XG52YXIgX2FyaWFEcHViUm9sZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2V0Yy9yb2xlcy9hcmlhRHB1YlJvbGVzXCIpKTtcbnZhciBfYXJpYUdyYXBoaWNzUm9sZXMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2V0Yy9yb2xlcy9hcmlhR3JhcGhpY3NSb2xlc1wiKSk7XG52YXIgX2l0ZXJhdGlvbkRlY29yYXRvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXRpbC9pdGVyYXRpb25EZWNvcmF0b3JcIikpO1xuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyB0aHJvdyBfZTI7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTMpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UzOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9XG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTsgfVxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHsgdmFyIF9pID0gYXJyID09IG51bGwgPyBudWxsIDogdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbXCJAQGl0ZXJhdG9yXCJdOyBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuOyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9zLCBfZTsgdHJ5IHsgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5mdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7IH1cbnZhciByb2xlcyA9IFtdLmNvbmNhdChfYXJpYUFic3RyYWN0Um9sZXMuZGVmYXVsdCwgX2FyaWFMaXRlcmFsUm9sZXMuZGVmYXVsdCwgX2FyaWFEcHViUm9sZXMuZGVmYXVsdCwgX2FyaWFHcmFwaGljc1JvbGVzLmRlZmF1bHQpO1xucm9sZXMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikge1xuICB2YXIgX3JlZjIgPSBfc2xpY2VkVG9BcnJheShfcmVmLCAyKSxcbiAgICByb2xlRGVmaW5pdGlvbiA9IF9yZWYyWzFdO1xuICAvLyBDb25nbG9tZXJhdGUgdGhlIHByb3BlcnRpZXNcbiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJvbGVEZWZpbml0aW9uLnN1cGVyQ2xhc3MpLFxuICAgIF9zdGVwO1xuICB0cnkge1xuICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICB2YXIgc3VwZXJDbGFzc0l0ZXIgPSBfc3RlcC52YWx1ZTtcbiAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoc3VwZXJDbGFzc0l0ZXIpLFxuICAgICAgICBfc3RlcDI7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHtcbiAgICAgICAgICB2YXIgc3VwZXJDbGFzc05hbWUgPSBfc3RlcDIudmFsdWU7XG4gICAgICAgICAgdmFyIHN1cGVyQ2xhc3NSb2xlVHVwbGUgPSByb2xlcy5maW5kKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgdmFyIF9yZWY0ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjMsIDEpLFxuICAgICAgICAgICAgICBuYW1lID0gX3JlZjRbMF07XG4gICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gc3VwZXJDbGFzc05hbWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHN1cGVyQ2xhc3NSb2xlVHVwbGUpIHtcbiAgICAgICAgICAgIHZhciBzdXBlckNsYXNzRGVmaW5pdGlvbiA9IHN1cGVyQ2xhc3NSb2xlVHVwbGVbMV07XG4gICAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhzdXBlckNsYXNzRGVmaW5pdGlvbi5wcm9wcyk7IF9pMiA8IF9PYmplY3Qka2V5cy5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgICAgICAgIHZhciBwcm9wID0gX09iamVjdCRrZXlzW19pMl07XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgLy8gJEZsb3dJc3N1ZSBBY2Nlc3NpbmcgdGhlIGhhc093blByb3BlcnR5IG9uIHRoZSBPYmplY3QgcHJvdG90eXBlIGlzIGZpbmUuXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocm9sZURlZmluaXRpb24ucHJvcHMsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyb2xlRGVmaW5pdGlvbi5wcm9wcywgX2RlZmluZVByb3BlcnR5KHt9LCBwcm9wLCBzdXBlckNsYXNzRGVmaW5pdGlvbi5wcm9wc1twcm9wXSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykge1xuICAgICAgICAgIF9sb29wKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBfaXRlcmF0b3IuZigpO1xuICB9XG59KTtcbnZhciByb2xlc01hcCA9IHtcbiAgZW50cmllczogZnVuY3Rpb24gZW50cmllcygpIHtcbiAgICByZXR1cm4gcm9sZXM7XG4gIH0sXG4gIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbnVsbDtcbiAgICB2YXIgX2l0ZXJhdG9yMyA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHJvbGVzKSxcbiAgICAgIF9zdGVwMztcbiAgICB0cnkge1xuICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHtcbiAgICAgICAgdmFyIF9zdGVwMyR2YWx1ZSA9IF9zbGljZWRUb0FycmF5KF9zdGVwMy52YWx1ZSwgMiksXG4gICAgICAgICAga2V5ID0gX3N0ZXAzJHZhbHVlWzBdLFxuICAgICAgICAgIHZhbHVlcyA9IF9zdGVwMyR2YWx1ZVsxXTtcbiAgICAgICAgZm4uY2FsbCh0aGlzQXJnLCB2YWx1ZXMsIGtleSwgcm9sZXMpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2l0ZXJhdG9yMy5lKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIF9pdGVyYXRvcjMuZigpO1xuICAgIH1cbiAgfSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgdmFyIGl0ZW0gPSByb2xlcy5maW5kKGZ1bmN0aW9uICh0dXBsZSkge1xuICAgICAgcmV0dXJuIHR1cGxlWzBdID09PSBrZXkgPyB0cnVlIDogZmFsc2U7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZW0gJiYgaXRlbVsxXTtcbiAgfSxcbiAgaGFzOiBmdW5jdGlvbiBoYXMoa2V5KSB7XG4gICAgcmV0dXJuICEhcm9sZXNNYXAuZ2V0KGtleSk7XG4gIH0sXG4gIGtleXM6IGZ1bmN0aW9uIGtleXMoKSB7XG4gICAgcmV0dXJuIHJvbGVzLm1hcChmdW5jdGlvbiAoX3JlZjUpIHtcbiAgICAgIHZhciBfcmVmNiA9IF9zbGljZWRUb0FycmF5KF9yZWY1LCAxKSxcbiAgICAgICAga2V5ID0gX3JlZjZbMF07XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH0pO1xuICB9LFxuICB2YWx1ZXM6IGZ1bmN0aW9uIHZhbHVlcygpIHtcbiAgICByZXR1cm4gcm9sZXMubWFwKGZ1bmN0aW9uIChfcmVmNykge1xuICAgICAgdmFyIF9yZWY4ID0gX3NsaWNlZFRvQXJyYXkoX3JlZjcsIDIpLFxuICAgICAgICB2YWx1ZXMgPSBfcmVmOFsxXTtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfSk7XG4gIH1cbn07XG52YXIgX2RlZmF1bHQgPSAoMCwgX2l0ZXJhdGlvbkRlY29yYXRvci5kZWZhdWx0KShyb2xlc01hcCwgcm9sZXNNYXAuZW50cmllcygpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0OyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJfYXJpYUFic3RyYWN0Um9sZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hcmlhTGl0ZXJhbFJvbGVzIiwiX2FyaWFEcHViUm9sZXMiLCJfYXJpYUdyYXBoaWNzUm9sZXMiLCJfaXRlcmF0aW9uRGVjb3JhdG9yIiwib2JqIiwiX19lc01vZHVsZSIsIl9kZWZpbmVQcm9wZXJ0eSIsImtleSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwibyIsImFsbG93QXJyYXlMaWtlIiwiaXQiLCJTeW1ib2wiLCJpdGVyYXRvciIsIkFycmF5IiwiaXNBcnJheSIsIl91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheSIsImxlbmd0aCIsImkiLCJGIiwicyIsIm4iLCJkb25lIiwiZSIsIl9lMiIsImYiLCJUeXBlRXJyb3IiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwiZXJyIiwiY2FsbCIsInN0ZXAiLCJuZXh0IiwiX2UzIiwicmV0dXJuIiwiX3NsaWNlZFRvQXJyYXkiLCJhcnIiLCJfYXJyYXlXaXRoSG9sZXMiLCJfaXRlcmFibGVUb0FycmF5TGltaXQiLCJfbm9uSXRlcmFibGVSZXN0IiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiZnJvbSIsInRlc3QiLCJsZW4iLCJhcnIyIiwiX2kiLCJfYXJyIiwiX24iLCJfZCIsIl9zIiwiX2UiLCJwdXNoIiwicm9sZXMiLCJjb25jYXQiLCJmb3JFYWNoIiwiX3JlZiIsIl9yZWYyIiwicm9sZURlZmluaXRpb24iLCJfaXRlcmF0b3IiLCJzdXBlckNsYXNzIiwiX3N0ZXAiLCJzdXBlckNsYXNzSXRlciIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJfbG9vcCIsInN1cGVyQ2xhc3NOYW1lIiwic3VwZXJDbGFzc1JvbGVUdXBsZSIsImZpbmQiLCJfcmVmMyIsIl9yZWY0Iiwic3VwZXJDbGFzc0RlZmluaXRpb24iLCJfaTIiLCJfT2JqZWN0JGtleXMiLCJrZXlzIiwicHJvcHMiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJhc3NpZ24iLCJyb2xlc01hcCIsImVudHJpZXMiLCJmbiIsInRoaXNBcmciLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJfaXRlcmF0b3IzIiwiX3N0ZXAzIiwiX3N0ZXAzJHZhbHVlIiwidmFsdWVzIiwiZ2V0IiwiaXRlbSIsInR1cGxlIiwiaGFzIiwibWFwIiwiX3JlZjUiLCJfcmVmNiIsIl9yZWY3IiwiX3JlZjgiLCJfZGVmYXVsdCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFFQUEsT0FBT0MsY0FBYyxDQUFDQyxTQUFTLGNBQWM7SUFDM0NDLE9BQU87QUFDVDtBQUNBRCxRQUFRRSxPQUFPLEdBQUcsS0FBSztBQUN2QixJQUFJQyxxQkFBcUJDLHVCQUF1QkMsUUFBUTtBQUN4RCxJ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