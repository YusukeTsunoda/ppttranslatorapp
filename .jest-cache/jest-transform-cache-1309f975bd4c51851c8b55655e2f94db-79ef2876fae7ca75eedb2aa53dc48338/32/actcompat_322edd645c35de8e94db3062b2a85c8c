51bf273ec98c9dd8329192013b19c72f
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = void 0;
exports.getIsReactActEnvironment = getIsReactActEnvironment;
exports.setReactActEnvironment = setIsReactActEnvironment;
var React = _interopRequireWildcard(require("react"));
var DeprecatedReactTestUtils = _interopRequireWildcard(require("react-dom/test-utils"));
function _getRequireWildcardCache(e) {
    if ("function" != typeof WeakMap) return null;
    var r = new WeakMap(), t = new WeakMap();
    return (_getRequireWildcardCache = function(e) {
        return e ? t : r;
    })(e);
}
function _interopRequireWildcard(e, r) {
    if (!r && e && e.__esModule) return e;
    if (null === e || "object" != typeof e && "function" != typeof e) return {
        default: e
    };
    var t = _getRequireWildcardCache(r);
    if (t && t.has(e)) return t.get(e);
    var n = {
        __proto__: null
    }, a = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var u in e)if ("default" !== u && ({}).hasOwnProperty.call(e, u)) {
        var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
        i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
    }
    return n.default = e, t && t.set(e, n), n;
}
const reactAct = typeof React.act === 'function' ? React.act : DeprecatedReactTestUtils.act;
function getGlobalThis() {
    /* istanbul ignore else */ if (typeof globalThis !== 'undefined') {
        return globalThis;
    }
    /* istanbul ignore next */ if (typeof self !== 'undefined') {
        return self;
    }
    /* istanbul ignore next */ if (typeof window !== 'undefined') {
        return window;
    }
    /* istanbul ignore next */ if (typeof global !== 'undefined') {
        return global;
    }
    /* istanbul ignore next */ throw new Error('unable to locate global object');
}
function setIsReactActEnvironment(isReactActEnvironment) {
    getGlobalThis().IS_REACT_ACT_ENVIRONMENT = isReactActEnvironment;
}
function getIsReactActEnvironment() {
    return getGlobalThis().IS_REACT_ACT_ENVIRONMENT;
}
function withGlobalActEnvironment(actImplementation) {
    return (callback)=>{
        const previousActEnvironment = getIsReactActEnvironment();
        setIsReactActEnvironment(true);
        try {
            // The return value of `act` is always a thenable.
            let callbackNeedsToBeAwaited = false;
            const actResult = actImplementation(()=>{
                const result = callback();
                if (result !== null && typeof result === 'object' && typeof result.then === 'function') {
                    callbackNeedsToBeAwaited = true;
                }
                return result;
            });
            if (callbackNeedsToBeAwaited) {
                const thenable = actResult;
                return {
                    then: (resolve, reject)=>{
                        thenable.then((returnValue)=>{
                            setIsReactActEnvironment(previousActEnvironment);
                            resolve(returnValue);
                        }, (error)=>{
                            setIsReactActEnvironment(previousActEnvironment);
                            reject(error);
                        });
                    }
                };
            } else {
                setIsReactActEnvironment(previousActEnvironment);
                return actResult;
            }
        } catch (error) {
            // Can't be a `finally {}` block since we don't know if we have to immediately restore IS_REACT_ACT_ENVIRONMENT
            // or if we have to await the callback first.
            setIsReactActEnvironment(previousActEnvironment);
            throw error;
        }
    };
}
const act = withGlobalActEnvironment(reactAct);
var _default = exports.default = act; /* eslint no-console:0 */ 

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXN1a2V0c3Vub2RhL0RvY3VtZW50cy9jdXJzb3IvcHB0dHJhbnNsYXRvcmFwcC9ub2RlX21vZHVsZXMvQHRlc3RpbmctbGlicmFyeS9yZWFjdC9kaXN0L2FjdC1jb21wYXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5leHBvcnRzLmdldElzUmVhY3RBY3RFbnZpcm9ubWVudCA9IGdldElzUmVhY3RBY3RFbnZpcm9ubWVudDtcbmV4cG9ydHMuc2V0UmVhY3RBY3RFbnZpcm9ubWVudCA9IHNldElzUmVhY3RBY3RFbnZpcm9ubWVudDtcbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgRGVwcmVjYXRlZFJlYWN0VGVzdFV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcInJlYWN0LWRvbS90ZXN0LXV0aWxzXCIpKTtcbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZShlKSB7IGlmIChcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIFdlYWtNYXApIHJldHVybiBudWxsOyB2YXIgciA9IG5ldyBXZWFrTWFwKCksIHQgPSBuZXcgV2Vha01hcCgpOyByZXR1cm4gKF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBlID8gdCA6IHI7IH0pKGUpOyB9XG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChlLCByKSB7IGlmICghciAmJiBlICYmIGUuX19lc01vZHVsZSkgcmV0dXJuIGU7IGlmIChudWxsID09PSBlIHx8IFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgJiYgXCJmdW5jdGlvblwiICE9IHR5cGVvZiBlKSByZXR1cm4geyBkZWZhdWx0OiBlIH07IHZhciB0ID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKHIpOyBpZiAodCAmJiB0LmhhcyhlKSkgcmV0dXJuIHQuZ2V0KGUpOyB2YXIgbiA9IHsgX19wcm90b19fOiBudWxsIH0sIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIgdSBpbiBlKSBpZiAoXCJkZWZhdWx0XCIgIT09IHUgJiYge30uaGFzT3duUHJvcGVydHkuY2FsbChlLCB1KSkgeyB2YXIgaSA9IGEgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHUpIDogbnVsbDsgaSAmJiAoaS5nZXQgfHwgaS5zZXQpID8gT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sIHUsIGkpIDogblt1XSA9IGVbdV07IH0gcmV0dXJuIG4uZGVmYXVsdCA9IGUsIHQgJiYgdC5zZXQoZSwgbiksIG47IH1cbmNvbnN0IHJlYWN0QWN0ID0gdHlwZW9mIFJlYWN0LmFjdCA9PT0gJ2Z1bmN0aW9uJyA/IFJlYWN0LmFjdCA6IERlcHJlY2F0ZWRSZWFjdFRlc3RVdGlscy5hY3Q7XG5mdW5jdGlvbiBnZXRHbG9iYWxUaGlzKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFRoaXM7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBzZWxmO1xuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiB3aW5kb3c7XG4gIH1cbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbDtcbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICB0aHJvdyBuZXcgRXJyb3IoJ3VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdCcpO1xufVxuZnVuY3Rpb24gc2V0SXNSZWFjdEFjdEVudmlyb25tZW50KGlzUmVhY3RBY3RFbnZpcm9ubWVudCkge1xuICBnZXRHbG9iYWxUaGlzKCkuSVNfUkVBQ1RfQUNUX0VOVklST05NRU5UID0gaXNSZWFjdEFjdEVudmlyb25tZW50O1xufVxuZnVuY3Rpb24gZ2V0SXNSZWFjdEFjdEVudmlyb25tZW50KCkge1xuICByZXR1cm4gZ2V0R2xvYmFsVGhpcygpLklTX1JFQUNUX0FDVF9FTlZJUk9OTUVOVDtcbn1cbmZ1bmN0aW9uIHdpdGhHbG9iYWxBY3RFbnZpcm9ubWVudChhY3RJbXBsZW1lbnRhdGlvbikge1xuICByZXR1cm4gY2FsbGJhY2sgPT4ge1xuICAgIGNvbnN0IHByZXZpb3VzQWN0RW52aXJvbm1lbnQgPSBnZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQoKTtcbiAgICBzZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQodHJ1ZSk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFRoZSByZXR1cm4gdmFsdWUgb2YgYGFjdGAgaXMgYWx3YXlzIGEgdGhlbmFibGUuXG4gICAgICBsZXQgY2FsbGJhY2tOZWVkc1RvQmVBd2FpdGVkID0gZmFsc2U7XG4gICAgICBjb25zdCBhY3RSZXN1bHQgPSBhY3RJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwgJiYgdHlwZW9mIHJlc3VsdCA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgY2FsbGJhY2tOZWVkc1RvQmVBd2FpdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgICBpZiAoY2FsbGJhY2tOZWVkc1RvQmVBd2FpdGVkKSB7XG4gICAgICAgIGNvbnN0IHRoZW5hYmxlID0gYWN0UmVzdWx0O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHRoZW46IChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoZW5hYmxlLnRoZW4ocmV0dXJuVmFsdWUgPT4ge1xuICAgICAgICAgICAgICBzZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQocHJldmlvdXNBY3RFbnZpcm9ubWVudCk7XG4gICAgICAgICAgICAgIHJlc29sdmUocmV0dXJuVmFsdWUpO1xuICAgICAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICBzZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQocHJldmlvdXNBY3RFbnZpcm9ubWVudCk7XG4gICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQocHJldmlvdXNBY3RFbnZpcm9ubWVudCk7XG4gICAgICAgIHJldHVybiBhY3RSZXN1bHQ7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIENhbid0IGJlIGEgYGZpbmFsbHkge31gIGJsb2NrIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgd2UgaGF2ZSB0byBpbW1lZGlhdGVseSByZXN0b3JlIElTX1JFQUNUX0FDVF9FTlZJUk9OTUVOVFxuICAgICAgLy8gb3IgaWYgd2UgaGF2ZSB0byBhd2FpdCB0aGUgY2FsbGJhY2sgZmlyc3QuXG4gICAgICBzZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQocHJldmlvdXNBY3RFbnZpcm9ubWVudCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG59XG5jb25zdCBhY3QgPSB3aXRoR2xvYmFsQWN0RW52aXJvbm1lbnQocmVhY3RBY3QpO1xudmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gYWN0O1xuLyogZXNsaW50IG5vLWNvbnNvbGU6MCAqLyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJnZXRJc1JlYWN0QWN0RW52aXJvbm1lbnQiLCJzZXRSZWFjdEFjdEVudmlyb25tZW50Iiwic2V0SXNSZWFjdEFjdEVudmlyb25tZW50IiwiUmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJEZXByZWNhdGVkUmVhY3RUZXN0VXRpbHMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJyZWFjdEFjdCIsImFjdCIsImdldEdsb2JhbFRoaXMiLCJnbG9iYWxUaGlzIiwic2VsZiIsIndpbmRvdyIsImdsb2JhbCIsIkVycm9yIiwiaXNSZWFjdEFjdEVudmlyb25tZW50IiwiSVNfUkVBQ1RfQUNUX0VOVklST05NRU5UIiwid2l0aEdsb2JhbEFjdEVudmlyb25tZW50IiwiYWN0SW1wbGVtZW50YXRpb24iLCJjYWxsYmFjayIsInByZXZpb3VzQWN0RW52aXJvbm1lbnQiLCJjYWxsYmFja05lZWRzVG9CZUF3YWl0ZWQiLCJhY3RSZXN1bHQiLCJyZXN1bHQiLCJ0aGVuIiwidGhlbmFibGUiLCJyZXNvbHZlIiwicmVqZWN0IiwicmV0dXJuVmFsdWUiLCJlcnJvciIsIl9kZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBQSxPQUFPQyxjQUFjLENBQUNDLFNBQVMsY0FBYztJQUMzQ0MsT0FBTztBQUNUO0FBQ0FELFFBQVFFLE9BQU8sR0FBRyxLQUFLO0FBQ3ZCRixRQUFRRyx3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