{"version":3,"file":"accessible-description.js","sources":["../sources/accessible-description.ts"],"sourcesContent":["import {\n\tcomputeTextAlternative,\n\tComputeTextAlternativeOptions,\n} from \"./accessible-name-and-description\";\nimport { queryIdRefs } from \"./util\";\n\n/**\n * @param root\n * @param options\n * @returns\n */\nexport function computeAccessibleDescription(\n\troot: Element,\n\toptions: ComputeTextAlternativeOptions = {},\n): string {\n\tlet description = queryIdRefs(root, \"aria-describedby\")\n\t\t.map((element) => {\n\t\t\treturn computeTextAlternative(element, {\n\t\t\t\t...options,\n\t\t\t\tcompute: \"description\",\n\t\t\t});\n\t\t})\n\t\t.join(\" \");\n\n\t// TODO: Technically we need to make sure that node wasn't used for the accessible name\n\t//       This causes `description_1.0_combobox-focusable-manual` to fail\n\n\t// https://w3c.github.io/aria/#aria-description\n\t// mentions that aria-description should only be calculated if aria-describedby didn't provide\n\t// a description\n\tif (description === \"\") {\n\t\tconst ariaDescription = root.getAttribute(\"aria-description\");\n\t\tdescription = ariaDescription === null ? \"\" : ariaDescription;\n\t}\n\n\t// https://www.w3.org/TR/html-aam-1.0/#accessible-name-and-description-computation\n\t// says for so many elements to use the `title` that we assume all elements are considered\n\tif (description === \"\") {\n\t\tconst title = root.getAttribute(\"title\");\n\t\tdescription = title === null ? \"\" : title;\n\t}\n\n\treturn description;\n}\n"],"names":["_accessibleNameAndDescription","require","_util","_typeof","o","Symbol","iterator","constructor","prototype","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","computeAccessibleDescription","root","options","description","queryIdRefs","map","element","computeTextAlternative","compute","join","ariaDescription","getAttribute","title"],"mappings":";;;AAAA,IAAAA,6BAAA,GAAAC,OAAA,CAAA;AAIA,IAAAC,KAAA,GAAAD,OAAA,CAAA;AAAqC,SAAAE,QAAAC,CAAA;IAAA;IAAA,OAAAD,OAAA,GAAA,cAAA,OAAAE,MAAA,IAAA,YAAA,OAAAA,MAAA,CAAAC,QAAA,GAAA,SAAAF,CAAA;QAAA,OAAA,OAAAA,CAAA;IAAA,IAAA,SAAAA,CAAA;QAAA,OAAAA,CAAA,IAAA,cAAA,OAAAC,MAAA,IAAAD,CAAA,CAAAG,WAAA,KAAAF,MAAA,IAAAD,CAAA,KAAAC,MAAA,CAAAG,SAAA,GAAA,WAAA,OAAAJ,CAAA;IAAA,GAAAD,OAAA,CAAAC,CAAA;AAAA;AAAA,SAAAK,QAAAC,CAAA,EAAAC,CAAA;IAAA,IAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA;IAAA,IAAAG,MAAA,CAAAE,qBAAA,EAAA;QAAA,IAAAX,CAAA,GAAAS,MAAA,CAAAE,qBAAA,CAAAL,CAAA;QAAAC,CAAA,KAAAP,CAAA,GAAAA,CAAA,CAAAY,MAAA,CAAA,SAAAL,CAAA;YAAA,OAAAE,MAAA,CAAAI,wBAAA,CAAAP,CAAA,EAAAC,CAAA,EAAAO,UAAA;QAAA,EAAA,GAAAN,CAAA,CAAAO,IAAA,CAAAC,KAAA,CAAAR,CAAA,EAAAR,CAAA;IAAA;IAAA,OAAAQ,CAAA;AAAA;AAAA,SAAAS,cAAAX,CAAA;IAAA,IAAA,IAAAC,CAAA,GAAA,GAAAA,CAAA,GAAAW,SAAA,CAAAC,MAAA,EAAAZ,CAAA,GAAA;QAAA,IAAAC,CAAA,GAAA,QAAAU,SAAA,CAAAX,CAAA,CAAA,GAAAW,SAAA,CAAAX,CAAA,CAAA,GAAA,CAAA;QAAAA,CAAA,GAAA,IAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAA,CAAA,GAAAY,OAAA,CAAA,SAAAb,CAAA;YAAAc,eAAA,CAAAf,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,CAAA;QAAA,KAAAE,MAAA,CAAAa,yBAAA,GAAAb,MAAA,CAAAc,gBAAA,CAAAjB,CAAA,EAAAG,MAAA,CAAAa,yBAAA,CAAAd,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAY,OAAA,CAAA,SAAAb,CAAA;YAAAE,MAAA,CAAAe,cAAA,CAAAlB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAI,wBAAA,CAAAL,CAAA,EAAAD,CAAA;QAAA;IAAA;IAAA,OAAAD,CAAA;AAAA;AAAA,SAAAe,gBAAAI,GAAA,EAAAC,GAAA,EAAAC,KAAA;IAAAD,GAAA,GAAAE,cAAA,CAAAF,GAAA;IAAA,IAAAA,GAAA,IAAAD,GAAA,EAAA;QAAAhB,MAAA,CAAAe,cAAA,CAAAC,GAAA,EAAAC,GAAA,EAAA;YAAAC,KAAA,EAAAA,KAAA;YAAAb,UAAA,EAAA;YAAAe,YAAA,EAAA;YAAAC,QAAA,EAAA;QAAA;IAAA,OAAA;QAAAL,GAAA,CAAAC,GAAA,CAAA,GAAAC,KAAA;IAAA;IAAA,OAAAF,GAAA;AAAA;AAAA,SAAAG,eAAAG,GAAA;IAAA,IAAAL,GAAA,GAAAM,YAAA,CAAAD,GAAA,EAAA;IAAA,OAAAhC,OAAA,CAAA2B,GAAA,MAAA,WAAAA,GAAA,GAAAO,MAAA,CAAAP,GAAA;AAAA;AAAA,SAAAM,aAAAE,KAAA,EAAAC,IAAA;IAAA,IAAApC,OAAA,CAAAmC,KAAA,MAAA,YAAAA,KAAA,KAAA,MAAA,OAAAA,KAAA;IAAA,IAAAE,IAAA,GAAAF,KAAA,CAAAjC,MAAA,CAAAoC,WAAA,CAAA;IAAA,IAAAD,IAAA,KAAAE,SAAA,EAAA;QAAA,IAAAC,GAAA,GAAAH,IAAA,CAAAI,IAAA,CAAAN,KAAA,EAAAC,IAAA,IAAA;QAAA,IAAApC,OAAA,CAAAwC,GAAA,MAAA,UAAA,OAAAA,GAAA;QAAA,MAAA,IAAAE,SAAA,CAAA;IAAA;IAAA,OAAA,CAAAN,IAAA,KAAA,WAAAF,MAAA,GAAAS,MAAAA,CAAA,CAAAR,KAAA;AAAA;AAErC;;;;CAIA,GACO,SAASS,4BAA4BA,CAC3CC,IAAa,EAEJ;IAAA,IADTC,OAAsC,GAAA3B,SAAA,CAAAC,MAAA,GAAA,KAAAD,SAAA,CAAA,EAAA,KAAAoB,SAAA,GAAApB,SAAA,CAAA,EAAA,GAAG,CAAC,CAAC;IAE3C,IAAI4B,WAAW,GAAG,CAAA,GAAAC,MAAAA,WAAAA,AAAW,EAACH,IAAI,EAAE,kBAAkB,CAAC,CACrDI,GAAG,CAAC,SAACC,OAAO,EAAK;QACjB,OAAO,CAAA,GAAAC,8BAAAA,sBAAAA,AAAsB,EAACD,OAAO,EAAAhC,aAAA,CAAAA,aAAA,CAAA,CAAA,GACjC4B,OAAO,GAAA,CAAA,GAAA;YACVM,OAAO,EAAE;QAAa,EACtB,CAAC;IACH,CAAC,CAAC,CACDC,IAAI,CAAC,GAAG,CAAC;IAEX,uFAAA;IACA,wEAAA;IAEA,+CAAA;IACA,8FAAA;IACA,gBAAA;IACA,IAAIN,WAAW,KAAK,EAAE,EAAE;QACvB,IAAMO,eAAe,GAAGT,IAAI,CAACU,YAAY,CAAC,kBAAkB,CAAC;QAC7DR,WAAW,GAAGO,eAAe,KAAK,IAAI,GAAG,EAAE,GAAGA,eAAe;IAC9D;IAEA,kFAAA;IACA,0FAAA;IACA,IAAIP,WAAW,KAAK,EAAE,EAAE;QACvB,IAAMS,KAAK,GAAGX,IAAI,CAACU,YAAY,CAAC,OAAO,CAAC;QACxCR,WAAW,GAAGS,KAAK,KAAK,IAAI,GAAG,EAAE,GAAGA,KAAK;IAC1C;IAEA,OAAOT,WAAW;AACnB"}