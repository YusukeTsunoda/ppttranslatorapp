{"version":3,"file":"is-inaccessible.js","sources":["../sources/is-inaccessible.ts"],"sourcesContent":["export interface IsInaccessibleOptions {\n\tgetComputedStyle?: typeof window.getComputedStyle;\n\t/**\n\t * Can be used to return cached results from previous isSubtreeInaccessible calls.\n\t */\n\tisSubtreeInaccessible?: (element: Element) => boolean;\n}\n\n/**\n * Partial implementation https://www.w3.org/TR/wai-aria-1.2/#tree_exclusion\n * which should only be used for elements with a non-presentational role i.e.\n * `role=\"none\"` and `role=\"presentation\"` will not be excluded.\n *\n * Implements aria-hidden semantics (i.e. parent overrides child)\n * Ignores \"Child Presentational: True\" characteristics\n *\n * @param element\n * @param options\n * @returns {boolean} true if excluded, otherwise false\n */\nexport function isInaccessible(\n\telement: Element,\n\toptions: IsInaccessibleOptions = {}\n): boolean {\n\tconst {\n\t\tgetComputedStyle = element.ownerDocument.defaultView?.getComputedStyle,\n\t\tisSubtreeInaccessible: isSubtreeInaccessibleImpl = isSubtreeInaccessible,\n\t} = options;\n\tif (typeof getComputedStyle !== \"function\") {\n\t\tthrow new TypeError(\n\t\t\t\"Owner document of the element needs to have an associated window.\"\n\t\t);\n\t}\n\t// since visibility is inherited we can exit early\n\tif (getComputedStyle(element).visibility === \"hidden\") {\n\t\treturn true;\n\t}\n\n\tlet currentElement: Element | null = element;\n\twhile (currentElement) {\n\t\tif (isSubtreeInaccessibleImpl(currentElement, { getComputedStyle })) {\n\t\t\treturn true;\n\t\t}\n\n\t\tcurrentElement = currentElement.parentElement;\n\t}\n\n\treturn false;\n}\n\nexport interface IsSubtreeInaccessibleOptions {\n\tgetComputedStyle?: typeof window.getComputedStyle;\n}\n\n/**\n *\n * @param element\n * @param options\n * @returns {boolean} - `true` if every child of the element is inaccessible\n */\nexport function isSubtreeInaccessible(\n\telement: Element,\n\toptions: IsSubtreeInaccessibleOptions = {}\n): boolean {\n\tconst {\n\t\tgetComputedStyle = element.ownerDocument.defaultView?.getComputedStyle,\n\t} = options;\n\tif (typeof getComputedStyle !== \"function\") {\n\t\tthrow new TypeError(\n\t\t\t\"Owner document of the element needs to have an associated window.\"\n\t\t);\n\t}\n\n\tif ((element as HTMLElement).hidden === true) {\n\t\treturn true;\n\t}\n\n\tif (element.getAttribute(\"aria-hidden\") === \"true\") {\n\t\treturn true;\n\t}\n\n\tif (getComputedStyle(element).display === \"none\") {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n"],"names":["isInaccessible","element","options","getComputedStyle","ownerDocument","defaultView","isSubtreeInaccessible","isSubtreeInaccessibleImpl","TypeError","visibility","currentElement","parentElement","hidden","getAttribute","display"],"mappings":";;;;AAQA;;;;;;;;;;;CAWA,GACO,SAASA,cAAc,CAC7BC,OAAgB,EAEN;IAAA,IAAA;IAAA,IADVC,OAA8B,GAAA,UAAA,MAAA,GAAA,KAAA,SAAA,CAAA,EAAA,KAAA,YAAA,SAAA,CAAA,EAAA,GAAG,CAAC,CAAC;IAEnC,IAAA,wBAGIA,OAAO,CAFVC,gBAAgB,EAAhBA,gBAAgB,GAAA,0BAAA,KAAA,IAAA,CAAA,wBAAGF,OAAO,CAACG,aAAa,CAACC,WAAAA,AAAW,MAAA,QAAA,0BAAA,KAAA,IAAA,KAAA,IAAjC,sBAAmCF,gBAAgB,GAAA,uBAAA,wBAEnED,OAAO,CADVI,qBAAqB,EAAEC,yBAAyB,GAAA,0BAAA,KAAA,IAAGD,qBAAqB,GAAA;IAEzE,IAAI,OAAOH,gBAAgB,KAAK,UAAU,EAAE;QAC3C,MAAM,IAAIK,SAAS,CAClB,mEAAmE,CACnE;IACF;IACA,kDAAA;IACA,IAAIL,gBAAgB,CAACF,OAAO,CAAC,CAACQ,UAAU,KAAK,QAAQ,EAAE;QACtD,OAAO,IAAI;IACZ;IAEA,IAAIC,cAA8B,GAAGT,OAAO;IAC5C,MAAOS,cAAc,CAAE;QACtB,IAAIH,yBAAyB,CAACG,cAAc,EAAE;YAAEP,gBAAgB,EAAhBA;QAAiB,CAAC,CAAC,EAAE;YACpE,OAAO,IAAI;QACZ;QAEAO,cAAc,GAAGA,cAAc,CAACC,aAAa;IAC9C;IAEA,OAAO,KAAK;AACb;AAMA;;;;;CAKA,GACO,SAASL,qBAAqB,CACpCL,OAAgB,EAEN;IAAA,IAAA;IAAA,IADVC,OAAqC,GAAA,UAAA,MAAA,GAAA,KAAA,SAAA,CAAA,EAAA,KAAA,YAAA,SAAA,CAAA,EAAA,GAAG,CAAC,CAAC;IAE1C,IAAA,yBAEIA,OAAO,CADVC,gBAAgB,EAAhBA,gBAAgB,GAAA,2BAAA,KAAA,IAAA,CAAA,yBAAGF,OAAO,CAACG,aAAa,CAACC,WAAAA,AAAW,MAAA,QAAA,2BAAA,KAAA,IAAA,KAAA,IAAjC,uBAAmCF,gBAAgB,GAAA;IAEvE,IAAI,OAAOA,gBAAgB,KAAK,UAAU,EAAE;QAC3C,MAAM,IAAIK,SAAS,CAClB,mEAAmE,CACnE;IACF;IAEA,IAAKP,OAAO,CAAiBW,MAAM,KAAK,IAAI,EAAE;QAC7C,OAAO,IAAI;IACZ;IAEA,IAAIX,OAAO,CAACY,YAAY,CAAC,aAAa,CAAC,KAAK,MAAM,EAAE;QACnD,OAAO,IAAI;IACZ;IAEA,IAAIV,gBAAgB,CAACF,OAAO,CAAC,CAACa,OAAO,KAAK,MAAM,EAAE;QACjD,OAAO,IAAI;IACZ;IAEA,OAAO,KAAK;AACb"}