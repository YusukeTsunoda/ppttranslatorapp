111adbcbbc60a48a98b85059acec26c7
"use strict";
exports.__esModule = true;
exports.computeTextAlternative = computeTextAlternative;
var _array = _interopRequireDefault(require("./polyfills/array.from"));
var _SetLike = _interopRequireDefault(require("./polyfills/SetLike"));
var _util = require("./util");
function _interopRequireDefault(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
/**
 * implements https://w3c.github.io/accname/
 */ /**
 *  A string of characters where all carriage returns, newlines, tabs, and form-feeds are replaced with a single space, and multiple spaces are reduced to a single space. The string contains only character data; it does not contain any markup.
 */ /**
 * interface for an options-bag where `window.getComputedStyle` can be mocked
 */ /**
 *
 * @param {string} string -
 * @returns {FlatString} -
 */ function asFlatString(s) {
    return s.trim().replace(/\s\s+/g, " ");
}
/**
 *
 * @param node -
 * @param options - These are not optional to prevent accidentally calling it without options in `computeAccessibleName`
 * @returns {boolean} -
 */ function isHidden(node, getComputedStyleImplementation) {
    if (!(0, _util.isElement)(node)) {
        return false;
    }
    if (node.hasAttribute("hidden") || node.getAttribute("aria-hidden") === "true") {
        return true;
    }
    var style = getComputedStyleImplementation(node);
    return style.getPropertyValue("display") === "none" || style.getPropertyValue("visibility") === "hidden";
}
/**
 * @param {Node} node -
 * @returns {boolean} - As defined in step 2E of https://w3c.github.io/accname/#mapping_additional_nd_te
 */ function isControl(node) {
    return (0, _util.hasAnyConcreteRoles)(node, [
        "button",
        "combobox",
        "listbox",
        "textbox"
    ]) || hasAbstractRole(node, "range");
}
function hasAbstractRole(node, role) {
    if (!(0, _util.isElement)(node)) {
        return false;
    }
    switch(role){
        case "range":
            return (0, _util.hasAnyConcreteRoles)(node, [
                "meter",
                "progressbar",
                "scrollbar",
                "slider",
                "spinbutton"
            ]);
        default:
            throw new TypeError("No knowledge about abstract role '".concat(role, "'. This is likely a bug :("));
    }
}
/**
 * element.querySelectorAll but also considers owned tree
 * @param element
 * @param selectors
 */ function querySelectorAllSubtree(element, selectors) {
    var elements = (0, _array.default)(element.querySelectorAll(selectors));
    (0, _util.queryIdRefs)(element, "aria-owns").forEach(function(root) {
        // babel transpiles this assuming an iterator
        elements.push.apply(elements, (0, _array.default)(root.querySelectorAll(selectors)));
    });
    return elements;
}
function querySelectedOptions(listbox) {
    if ((0, _util.isHTMLSelectElement)(listbox)) {
        // IE11 polyfill
        return listbox.selectedOptions || querySelectorAllSubtree(listbox, "[selected]");
    }
    return querySelectorAllSubtree(listbox, '[aria-selected="true"]');
}
function isMarkedPresentational(node) {
    return (0, _util.hasAnyConcreteRoles)(node, _util.presentationRoles);
}
/**
 * Elements specifically listed in html-aam
 *
 * We don't need this for `label` or `legend` elements.
 * Their implicit roles already allow "naming from content".
 *
 * sources:
 *
 * - https://w3c.github.io/html-aam/#table-element
 */ function isNativeHostLanguageTextAlternativeElement(node) {
    return (0, _util.isHTMLTableCaptionElement)(node);
}
/**
 * https://w3c.github.io/aria/#namefromcontent
 */ function allowsNameFromContent(node) {
    return (0, _util.hasAnyConcreteRoles)(node, [
        "button",
        "cell",
        "checkbox",
        "columnheader",
        "gridcell",
        "heading",
        "label",
        "legend",
        "link",
        "menuitem",
        "menuitemcheckbox",
        "menuitemradio",
        "option",
        "radio",
        "row",
        "rowheader",
        "switch",
        "tab",
        "tooltip",
        "treeitem"
    ]);
}
/**
 * TODO https://github.com/eps1lon/dom-accessibility-api/issues/100
 */ function isDescendantOfNativeHostLanguageTextAlternativeElement(// eslint-disable-next-line @typescript-eslint/no-unused-vars -- not implemented yet
node) {
    return false;
}
function getValueOfTextbox(element) {
    if ((0, _util.isHTMLInputElement)(element) || (0, _util.isHTMLTextAreaElement)(element)) {
        return element.value;
    }
    // https://github.com/eps1lon/dom-accessibility-api/issues/4
    return element.textContent || "";
}
function getTextualContent(declaration) {
    var content = declaration.getPropertyValue("content");
    if (/^["'].*["']$/.test(content)) {
        return content.slice(1, -1);
    }
    return "";
}
/**
 * https://html.spec.whatwg.org/multipage/forms.html#category-label
 * TODO: form-associated custom elements
 * @param element
 */ function isLabelableElement(element) {
    var localName = (0, _util.getLocalName)(element);
    return localName === "button" || localName === "input" && element.getAttribute("type") !== "hidden" || localName === "meter" || localName === "output" || localName === "progress" || localName === "select" || localName === "textarea";
}
/**
 * > [...], then the first such descendant in tree order is the label element's labeled control.
 * -- https://html.spec.whatwg.org/multipage/forms.html#labeled-control
 * @param element
 */ function findLabelableElement(element) {
    if (isLabelableElement(element)) {
        return element;
    }
    var labelableElement = null;
    element.childNodes.forEach(function(childNode) {
        if (labelableElement === null && (0, _util.isElement)(childNode)) {
            var descendantLabelableElement = findLabelableElement(childNode);
            if (descendantLabelableElement !== null) {
                labelableElement = descendantLabelableElement;
            }
        }
    });
    return labelableElement;
}
/**
 * Polyfill of HTMLLabelElement.control
 * https://html.spec.whatwg.org/multipage/forms.html#labeled-control
 * @param label
 */ function getControlOfLabel(label) {
    if (label.control !== undefined) {
        return label.control;
    }
    var htmlFor = label.getAttribute("for");
    if (htmlFor !== null) {
        return label.ownerDocument.getElementById(htmlFor);
    }
    return findLabelableElement(label);
}
/**
 * Polyfill of HTMLInputElement.labels
 * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/labels
 * @param element
 */ function getLabels(element) {
    var labelsProperty = element.labels;
    if (labelsProperty === null) {
        return labelsProperty;
    }
    if (labelsProperty !== undefined) {
        return (0, _array.default)(labelsProperty);
    }
    // polyfill
    if (!isLabelableElement(element)) {
        return null;
    }
    var document = element.ownerDocument;
    return (0, _array.default)(document.querySelectorAll("label")).filter(function(label) {
        return getControlOfLabel(label) === element;
    });
}
/**
 * Gets the contents of a slot used for computing the accname
 * @param slot
 */ function getSlotContents(slot) {
    // Computing the accessible name for elements containing slots is not
    // currently defined in the spec. This implementation reflects the
    // behavior of NVDA 2020.2/Firefox 81 and iOS VoiceOver/Safari 13.6.
    var assignedNodes = slot.assignedNodes();
    if (assignedNodes.length === 0) {
        // if no nodes are assigned to the slot, it displays the default content
        return (0, _array.default)(slot.childNodes);
    }
    return assignedNodes;
}
/**
 * implements https://w3c.github.io/accname/#mapping_additional_nd_te
 * @param root
 * @param options
 * @returns
 */ function computeTextAlternative(root) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var consultedNodes = new _SetLike.default();
    var window = (0, _util.safeWindow)(root);
    var _options$compute = options.compute, compute = _options$compute === void 0 ? "name" : _options$compute, _options$computedStyl = options.computedStyleSupportsPseudoElements, computedStyleSupportsPseudoElements = _options$computedStyl === void 0 ? options.getComputedStyle !== undefined : _options$computedStyl, _options$getComputedS = options.getComputedStyle, getComputedStyle = _options$getComputedS === void 0 ? window.getComputedStyle.bind(window) : _options$getComputedS, _options$hidden = options.hidden, hidden = _options$hidden === void 0 ? false : _options$hidden;
    // 2F.i
    function computeMiscTextAlternative(node, context) {
        var accumulatedText = "";
        if ((0, _util.isElement)(node) && computedStyleSupportsPseudoElements) {
            var pseudoBefore = getComputedStyle(node, "::before");
            var beforeContent = getTextualContent(pseudoBefore);
            accumulatedText = "".concat(beforeContent, " ").concat(accumulatedText);
        }
        // FIXME: Including aria-owns is not defined in the spec
        // But it is required in the web-platform-test
        var childNodes = (0, _util.isHTMLSlotElement)(node) ? getSlotContents(node) : (0, _array.default)(node.childNodes).concat((0, _util.queryIdRefs)(node, "aria-owns"));
        childNodes.forEach(function(child) {
            var result = computeTextAlternative(child, {
                isEmbeddedInLabel: context.isEmbeddedInLabel,
                isReferenced: false,
                recursion: true
            });
            // TODO: Unclear why display affects delimiter
            // see https://github.com/w3c/accname/issues/3
            var display = (0, _util.isElement)(child) ? getComputedStyle(child).getPropertyValue("display") : "inline";
            var separator = display !== "inline" ? " " : "";
            // trailing separator for wpt tests
            accumulatedText += "".concat(separator).concat(result).concat(separator);
        });
        if ((0, _util.isElement)(node) && computedStyleSupportsPseudoElements) {
            var pseudoAfter = getComputedStyle(node, "::after");
            var afterContent = getTextualContent(pseudoAfter);
            accumulatedText = "".concat(accumulatedText, " ").concat(afterContent);
        }
        return accumulatedText.trim();
    }
    /**
   *
   * @param element
   * @param attributeName
   * @returns A string non-empty string or `null`
   */ function useAttribute(element, attributeName) {
        var attribute = element.getAttributeNode(attributeName);
        if (attribute !== null && !consultedNodes.has(attribute) && attribute.value.trim() !== "") {
            consultedNodes.add(attribute);
            return attribute.value;
        }
        return null;
    }
    function computeTooltipAttributeValue(node) {
        if (!(0, _util.isElement)(node)) {
            return null;
        }
        return useAttribute(node, "title");
    }
    function computeElementTextAlternative(node) {
        if (!(0, _util.isElement)(node)) {
            return null;
        }
        // https://w3c.github.io/html-aam/#fieldset-and-legend-elements
        if ((0, _util.isHTMLFieldSetElement)(node)) {
            consultedNodes.add(node);
            var children = (0, _array.default)(node.childNodes);
            for(var i = 0; i < children.length; i += 1){
                var child = children[i];
                if ((0, _util.isHTMLLegendElement)(child)) {
                    return computeTextAlternative(child, {
                        isEmbeddedInLabel: false,
                        isReferenced: false,
                        recursion: false
                    });
                }
            }
        } else if ((0, _util.isHTMLTableElement)(node)) {
            // https://w3c.github.io/html-aam/#table-element
            consultedNodes.add(node);
            var _children = (0, _array.default)(node.childNodes);
            for(var _i = 0; _i < _children.length; _i += 1){
                var _child = _children[_i];
                if ((0, _util.isHTMLTableCaptionElement)(_child)) {
                    return computeTextAlternative(_child, {
                        isEmbeddedInLabel: false,
                        isReferenced: false,
                        recursion: false
                    });
                }
            }
        } else if ((0, _util.isSVGSVGElement)(node)) {
            // https://www.w3.org/TR/svg-aam-1.0/
            consultedNodes.add(node);
            var _children2 = (0, _array.default)(node.childNodes);
            for(var _i2 = 0; _i2 < _children2.length; _i2 += 1){
                var _child2 = _children2[_i2];
                if ((0, _util.isSVGTitleElement)(_child2)) {
                    return _child2.textContent;
                }
            }
            return null;
        } else if ((0, _util.getLocalName)(node) === "img" || (0, _util.getLocalName)(node) === "area") {
            // https://w3c.github.io/html-aam/#area-element
            // https://w3c.github.io/html-aam/#img-element
            var nameFromAlt = useAttribute(node, "alt");
            if (nameFromAlt !== null) {
                return nameFromAlt;
            }
        } else if ((0, _util.isHTMLOptGroupElement)(node)) {
            var nameFromLabel = useAttribute(node, "label");
            if (nameFromLabel !== null) {
                return nameFromLabel;
            }
        }
        if ((0, _util.isHTMLInputElement)(node) && (node.type === "button" || node.type === "submit" || node.type === "reset")) {
            // https://w3c.github.io/html-aam/#input-type-text-input-type-password-input-type-search-input-type-tel-input-type-email-input-type-url-and-textarea-element-accessible-description-computation
            var nameFromValue = useAttribute(node, "value");
            if (nameFromValue !== null) {
                return nameFromValue;
            }
            // TODO: l10n
            if (node.type === "submit") {
                return "Submit";
            }
            // TODO: l10n
            if (node.type === "reset") {
                return "Reset";
            }
        }
        var labels = getLabels(node);
        if (labels !== null && labels.length !== 0) {
            consultedNodes.add(node);
            return (0, _array.default)(labels).map(function(element) {
                return computeTextAlternative(element, {
                    isEmbeddedInLabel: true,
                    isReferenced: false,
                    recursion: true
                });
            }).filter(function(label) {
                return label.length > 0;
            }).join(" ");
        }
        // https://w3c.github.io/html-aam/#input-type-image-accessible-name-computation
        // TODO: wpt test consider label elements but html-aam does not mention them
        // We follow existing implementations over spec
        if ((0, _util.isHTMLInputElement)(node) && node.type === "image") {
            var _nameFromAlt = useAttribute(node, "alt");
            if (_nameFromAlt !== null) {
                return _nameFromAlt;
            }
            var nameFromTitle = useAttribute(node, "title");
            if (nameFromTitle !== null) {
                return nameFromTitle;
            }
            // TODO: l10n
            return "Submit Query";
        }
        if ((0, _util.hasAnyConcreteRoles)(node, [
            "button"
        ])) {
            // https://www.w3.org/TR/html-aam-1.0/#button-element
            var nameFromSubTree = computeMiscTextAlternative(node, {
                isEmbeddedInLabel: false,
                isReferenced: false
            });
            if (nameFromSubTree !== "") {
                return nameFromSubTree;
            }
        }
        return null;
    }
    function computeTextAlternative(current, context) {
        if (consultedNodes.has(current)) {
            return "";
        }
        // 2A
        if (!hidden && isHidden(current, getComputedStyle) && !context.isReferenced) {
            consultedNodes.add(current);
            return "";
        }
        // 2B
        var labelAttributeNode = (0, _util.isElement)(current) ? current.getAttributeNode("aria-labelledby") : null;
        // TODO: Do we generally need to block query IdRefs of attributes we have already consulted?
        var labelElements = labelAttributeNode !== null && !consultedNodes.has(labelAttributeNode) ? (0, _util.queryIdRefs)(current, "aria-labelledby") : [];
        if (compute === "name" && !context.isReferenced && labelElements.length > 0) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- Can't be null here otherwise labelElements would be empty
            consultedNodes.add(labelAttributeNode);
            return labelElements.map(function(element) {
                // TODO: Chrome will consider repeated values i.e. use a node multiple times while we'll bail out in computeTextAlternative.
                return computeTextAlternative(element, {
                    isEmbeddedInLabel: context.isEmbeddedInLabel,
                    isReferenced: true,
                    // this isn't recursion as specified, otherwise we would skip
                    // `aria-label` in
                    // <input id="myself" aria-label="foo" aria-labelledby="myself"
                    recursion: false
                });
            }).join(" ");
        }
        // 2C
        // Changed from the spec in anticipation of https://github.com/w3c/accname/issues/64
        // spec says we should only consider skipping if we have a non-empty label
        var skipToStep2E = context.recursion && isControl(current) && compute === "name";
        if (!skipToStep2E) {
            var ariaLabel = ((0, _util.isElement)(current) && current.getAttribute("aria-label") || "").trim();
            if (ariaLabel !== "" && compute === "name") {
                consultedNodes.add(current);
                return ariaLabel;
            }
            // 2D
            if (!isMarkedPresentational(current)) {
                var elementTextAlternative = computeElementTextAlternative(current);
                if (elementTextAlternative !== null) {
                    consultedNodes.add(current);
                    return elementTextAlternative;
                }
            }
        }
        // special casing, cheating to make tests pass
        // https://github.com/w3c/accname/issues/67
        if ((0, _util.hasAnyConcreteRoles)(current, [
            "menu"
        ])) {
            consultedNodes.add(current);
            return "";
        }
        // 2E
        if (skipToStep2E || context.isEmbeddedInLabel || context.isReferenced) {
            if ((0, _util.hasAnyConcreteRoles)(current, [
                "combobox",
                "listbox"
            ])) {
                consultedNodes.add(current);
                var selectedOptions = querySelectedOptions(current);
                if (selectedOptions.length === 0) {
                    // defined per test `name_heading_combobox`
                    return (0, _util.isHTMLInputElement)(current) ? current.value : "";
                }
                return (0, _array.default)(selectedOptions).map(function(selectedOption) {
                    return computeTextAlternative(selectedOption, {
                        isEmbeddedInLabel: context.isEmbeddedInLabel,
                        isReferenced: false,
                        recursion: true
                    });
                }).join(" ");
            }
            if (hasAbstractRole(current, "range")) {
                consultedNodes.add(current);
                if (current.hasAttribute("aria-valuetext")) {
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard
                    return current.getAttribute("aria-valuetext");
                }
                if (current.hasAttribute("aria-valuenow")) {
                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute guard
                    return current.getAttribute("aria-valuenow");
                }
                // Otherwise, use the value as specified by a host language attribute.
                return current.getAttribute("value") || "";
            }
            if ((0, _util.hasAnyConcreteRoles)(current, [
                "textbox"
            ])) {
                consultedNodes.add(current);
                return getValueOfTextbox(current);
            }
        }
        // 2F: https://w3c.github.io/accname/#step2F
        if (allowsNameFromContent(current) || (0, _util.isElement)(current) && context.isReferenced || isNativeHostLanguageTextAlternativeElement(current) || isDescendantOfNativeHostLanguageTextAlternativeElement(current)) {
            var accumulatedText2F = computeMiscTextAlternative(current, {
                isEmbeddedInLabel: context.isEmbeddedInLabel,
                isReferenced: false
            });
            if (accumulatedText2F !== "") {
                consultedNodes.add(current);
                return accumulatedText2F;
            }
        }
        if (current.nodeType === current.TEXT_NODE) {
            consultedNodes.add(current);
            return current.textContent || "";
        }
        if (context.recursion) {
            consultedNodes.add(current);
            return computeMiscTextAlternative(current, {
                isEmbeddedInLabel: context.isEmbeddedInLabel,
                isReferenced: false
            });
        }
        var tooltipAttributeValue = computeTooltipAttributeValue(current);
        if (tooltipAttributeValue !== null) {
            consultedNodes.add(current);
            return tooltipAttributeValue;
        }
        // TODO should this be reachable?
        consultedNodes.add(current);
        return "";
    }
    return asFlatString(computeTextAlternative(root, {
        isEmbeddedInLabel: false,
        // by spec computeAccessibleDescription starts with the referenced elements as roots
        isReferenced: compute === "description",
        recursion: false
    }));
} //# sourceMappingURL=accessible-name-and-description.js.map

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWNjZXNzaWJsZS1uYW1lLWFuZC1kZXNjcmlwdGlvbi5qcyIsInNvdXJjZXMiOlsiLi4vc291cmNlcy9hY2Nlc3NpYmxlLW5hbWUtYW5kLWRlc2NyaXB0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogaW1wbGVtZW50cyBodHRwczovL3czYy5naXRodWIuaW8vYWNjbmFtZS9cbiAqL1xuaW1wb3J0IEFycmF5RnJvbSBmcm9tIFwiLi9wb2x5ZmlsbHMvYXJyYXkuZnJvbVwiO1xuaW1wb3J0IFNldExpa2UgZnJvbSBcIi4vcG9seWZpbGxzL1NldExpa2VcIjtcbmltcG9ydCB7XG5cdGhhc0FueUNvbmNyZXRlUm9sZXMsXG5cdGlzRWxlbWVudCxcblx0aXNIVE1MVGFibGVDYXB0aW9uRWxlbWVudCxcblx0aXNIVE1MSW5wdXRFbGVtZW50LFxuXHRpc0hUTUxTZWxlY3RFbGVtZW50LFxuXHRpc0hUTUxUZXh0QXJlYUVsZW1lbnQsXG5cdHNhZmVXaW5kb3csXG5cdGlzSFRNTEZpZWxkU2V0RWxlbWVudCxcblx0aXNIVE1MTGVnZW5kRWxlbWVudCxcblx0aXNIVE1MT3B0R3JvdXBFbGVtZW50LFxuXHRpc0hUTUxUYWJsZUVsZW1lbnQsXG5cdGlzSFRNTFNsb3RFbGVtZW50LFxuXHRpc1NWR1NWR0VsZW1lbnQsXG5cdGlzU1ZHVGl0bGVFbGVtZW50LFxuXHRxdWVyeUlkUmVmcyxcblx0Z2V0TG9jYWxOYW1lLFxuXHRwcmVzZW50YXRpb25Sb2xlcyxcbn0gZnJvbSBcIi4vdXRpbFwiO1xuXG4vKipcbiAqICBBIHN0cmluZyBvZiBjaGFyYWN0ZXJzIHdoZXJlIGFsbCBjYXJyaWFnZSByZXR1cm5zLCBuZXdsaW5lcywgdGFicywgYW5kIGZvcm0tZmVlZHMgYXJlIHJlcGxhY2VkIHdpdGggYSBzaW5nbGUgc3BhY2UsIGFuZCBtdWx0aXBsZSBzcGFjZXMgYXJlIHJlZHVjZWQgdG8gYSBzaW5nbGUgc3BhY2UuIFRoZSBzdHJpbmcgY29udGFpbnMgb25seSBjaGFyYWN0ZXIgZGF0YTsgaXQgZG9lcyBub3QgY29udGFpbiBhbnkgbWFya3VwLlxuICovXG50eXBlIEZsYXRTdHJpbmcgPSBzdHJpbmcgJiB7XG5cdF9fZmxhdDogdHJ1ZTtcbn07XG5cbi8qKlxuICogaW50ZXJmYWNlIGZvciBhbiBvcHRpb25zLWJhZyB3aGVyZSBgd2luZG93LmdldENvbXB1dGVkU3R5bGVgIGNhbiBiZSBtb2NrZWRcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wdXRlVGV4dEFsdGVybmF0aXZlT3B0aW9ucyB7XG5cdGNvbXB1dGU/OiBcImRlc2NyaXB0aW9uXCIgfCBcIm5hbWVcIjtcblx0LyoqXG5cdCAqIFNldCB0byB0cnVlIGlmIHdpbmRvdy5jb21wdXRlZFN0eWxlIHN1cHBvcnRzIHRoZSBzZWNvbmQgYXJndW1lbnQuXG5cdCAqIFRoaXMgc2hvdWxkIGJlIGZhbHNlIGluIEpTRE9NLiBPdGhlcndpc2UgSlNET00gd2lsbCBsb2cgY29uc29sZSBlcnJvcnMuXG5cdCAqL1xuXHRjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50cz86IGJvb2xlYW47XG5cdC8qKlxuXHQgKiBtb2NrIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLiBOZWVkcyBgY29udGVudGAsIGBkaXNwbGF5YCBhbmQgYHZpc2liaWxpdHlgXG5cdCAqL1xuXHRnZXRDb21wdXRlZFN0eWxlPzogdHlwZW9mIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlO1xuXHQvKipcblx0ICogU2V0IHRvIGB0cnVlYCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGhpZGRlbiBlbGVtZW50cyBpbiB0aGUgYWNjZXNzaWJsZSBuYW1lIGFuZCBkZXNjcmlwdGlvbiBjb21wdXRhdGlvbi5cblx0ICogU2tpcHMgMkEgaW4gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2FjY25hbWUvI2NvbXB1dGF0aW9uLXN0ZXBzLlxuXHQgKiBAZGVmYXVsdCBmYWxzZVxuXHQgKi9cblx0aGlkZGVuPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyAtXG4gKiBAcmV0dXJucyB7RmxhdFN0cmluZ30gLVxuICovXG5mdW5jdGlvbiBhc0ZsYXRTdHJpbmcoczogc3RyaW5nKTogRmxhdFN0cmluZyB7XG5cdHJldHVybiBzLnRyaW0oKS5yZXBsYWNlKC9cXHNcXHMrL2csIFwiIFwiKSBhcyBGbGF0U3RyaW5nO1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbm9kZSAtXG4gKiBAcGFyYW0gb3B0aW9ucyAtIFRoZXNlIGFyZSBub3Qgb3B0aW9uYWwgdG8gcHJldmVudCBhY2NpZGVudGFsbHkgY2FsbGluZyBpdCB3aXRob3V0IG9wdGlvbnMgaW4gYGNvbXB1dGVBY2Nlc3NpYmxlTmFtZWBcbiAqIEByZXR1cm5zIHtib29sZWFufSAtXG4gKi9cbmZ1bmN0aW9uIGlzSGlkZGVuKFxuXHRub2RlOiBOb2RlLFxuXHRnZXRDb21wdXRlZFN0eWxlSW1wbGVtZW50YXRpb246IHR5cGVvZiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxcbik6IG5vZGUgaXMgRWxlbWVudCB7XG5cdGlmICghaXNFbGVtZW50KG5vZGUpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKFxuXHRcdG5vZGUuaGFzQXR0cmlidXRlKFwiaGlkZGVuXCIpIHx8XG5cdFx0bm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiKSA9PT0gXCJ0cnVlXCJcblx0KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGVJbXBsZW1lbnRhdGlvbihub2RlKTtcblx0cmV0dXJuIChcblx0XHRzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiZGlzcGxheVwiKSA9PT0gXCJub25lXCIgfHxcblx0XHRzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwidmlzaWJpbGl0eVwiKSA9PT0gXCJoaWRkZW5cIlxuXHQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAtXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBBcyBkZWZpbmVkIGluIHN0ZXAgMkUgb2YgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2FjY25hbWUvI21hcHBpbmdfYWRkaXRpb25hbF9uZF90ZVxuICovXG5mdW5jdGlvbiBpc0NvbnRyb2wobm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gKFxuXHRcdGhhc0FueUNvbmNyZXRlUm9sZXMobm9kZSwgW1wiYnV0dG9uXCIsIFwiY29tYm9ib3hcIiwgXCJsaXN0Ym94XCIsIFwidGV4dGJveFwiXSkgfHxcblx0XHRoYXNBYnN0cmFjdFJvbGUobm9kZSwgXCJyYW5nZVwiKVxuXHQpO1xufVxuXG5mdW5jdGlvbiBoYXNBYnN0cmFjdFJvbGUobm9kZTogTm9kZSwgcm9sZTogc3RyaW5nKTogbm9kZSBpcyBFbGVtZW50IHtcblx0aWYgKCFpc0VsZW1lbnQobm9kZSkpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRzd2l0Y2ggKHJvbGUpIHtcblx0XHRjYXNlIFwicmFuZ2VcIjpcblx0XHRcdHJldHVybiBoYXNBbnlDb25jcmV0ZVJvbGVzKG5vZGUsIFtcblx0XHRcdFx0XCJtZXRlclwiLFxuXHRcdFx0XHRcInByb2dyZXNzYmFyXCIsXG5cdFx0XHRcdFwic2Nyb2xsYmFyXCIsXG5cdFx0XHRcdFwic2xpZGVyXCIsXG5cdFx0XHRcdFwic3BpbmJ1dHRvblwiLFxuXHRcdFx0XSk7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoXG5cdFx0XHRcdGBObyBrbm93bGVkZ2UgYWJvdXQgYWJzdHJhY3Qgcm9sZSAnJHtyb2xlfScuIFRoaXMgaXMgbGlrZWx5IGEgYnVnIDooYCxcblx0XHRcdCk7XG5cdH1cbn1cblxuLyoqXG4gKiBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgYnV0IGFsc28gY29uc2lkZXJzIG93bmVkIHRyZWVcbiAqIEBwYXJhbSBlbGVtZW50XG4gKiBAcGFyYW0gc2VsZWN0b3JzXG4gKi9cbmZ1bmN0aW9uIHF1ZXJ5U2VsZWN0b3JBbGxTdWJ0cmVlKFxuXHRlbGVtZW50OiBFbGVtZW50LFxuXHRzZWxlY3RvcnM6IHN0cmluZyxcbik6IEVsZW1lbnRbXSB7XG5cdGNvbnN0IGVsZW1lbnRzID0gQXJyYXlGcm9tKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMpKTtcblxuXHRxdWVyeUlkUmVmcyhlbGVtZW50LCBcImFyaWEtb3duc1wiKS5mb3JFYWNoKChyb290KSA9PiB7XG5cdFx0Ly8gYmFiZWwgdHJhbnNwaWxlcyB0aGlzIGFzc3VtaW5nIGFuIGl0ZXJhdG9yXG5cdFx0ZWxlbWVudHMucHVzaC5hcHBseShlbGVtZW50cywgQXJyYXlGcm9tKHJvb3QucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMpKSk7XG5cdH0pO1xuXG5cdHJldHVybiBlbGVtZW50cztcbn1cblxuZnVuY3Rpb24gcXVlcnlTZWxlY3RlZE9wdGlvbnMobGlzdGJveDogRWxlbWVudCk6IEFycmF5TGlrZTxFbGVtZW50PiB7XG5cdGlmIChpc0hUTUxTZWxlY3RFbGVtZW50KGxpc3Rib3gpKSB7XG5cdFx0Ly8gSUUxMSBwb2x5ZmlsbFxuXHRcdHJldHVybiAoXG5cdFx0XHRsaXN0Ym94LnNlbGVjdGVkT3B0aW9ucyB8fCBxdWVyeVNlbGVjdG9yQWxsU3VidHJlZShsaXN0Ym94LCBcIltzZWxlY3RlZF1cIilcblx0XHQpO1xuXHR9XG5cdHJldHVybiBxdWVyeVNlbGVjdG9yQWxsU3VidHJlZShsaXN0Ym94LCAnW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJyk7XG59XG5cbmZ1bmN0aW9uIGlzTWFya2VkUHJlc2VudGF0aW9uYWwobm9kZTogTm9kZSk6IG5vZGUgaXMgRWxlbWVudCB7XG5cdHJldHVybiBoYXNBbnlDb25jcmV0ZVJvbGVzKG5vZGUsIHByZXNlbnRhdGlvblJvbGVzKTtcbn1cblxuLyoqXG4gKiBFbGVtZW50cyBzcGVjaWZpY2FsbHkgbGlzdGVkIGluIGh0bWwtYWFtXG4gKlxuICogV2UgZG9uJ3QgbmVlZCB0aGlzIGZvciBgbGFiZWxgIG9yIGBsZWdlbmRgIGVsZW1lbnRzLlxuICogVGhlaXIgaW1wbGljaXQgcm9sZXMgYWxyZWFkeSBhbGxvdyBcIm5hbWluZyBmcm9tIGNvbnRlbnRcIi5cbiAqXG4gKiBzb3VyY2VzOlxuICpcbiAqIC0gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2h0bWwtYWFtLyN0YWJsZS1lbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlSG9zdExhbmd1YWdlVGV4dEFsdGVybmF0aXZlRWxlbWVudChcblx0bm9kZTogTm9kZSxcbik6IG5vZGUgaXMgRWxlbWVudCB7XG5cdHJldHVybiBpc0hUTUxUYWJsZUNhcHRpb25FbGVtZW50KG5vZGUpO1xufVxuXG4vKipcbiAqIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9hcmlhLyNuYW1lZnJvbWNvbnRlbnRcbiAqL1xuZnVuY3Rpb24gYWxsb3dzTmFtZUZyb21Db250ZW50KG5vZGU6IE5vZGUpOiBib29sZWFuIHtcblx0cmV0dXJuIGhhc0FueUNvbmNyZXRlUm9sZXMobm9kZSwgW1xuXHRcdFwiYnV0dG9uXCIsXG5cdFx0XCJjZWxsXCIsXG5cdFx0XCJjaGVja2JveFwiLFxuXHRcdFwiY29sdW1uaGVhZGVyXCIsXG5cdFx0XCJncmlkY2VsbFwiLFxuXHRcdFwiaGVhZGluZ1wiLFxuXHRcdFwibGFiZWxcIixcblx0XHRcImxlZ2VuZFwiLFxuXHRcdFwibGlua1wiLFxuXHRcdFwibWVudWl0ZW1cIixcblx0XHRcIm1lbnVpdGVtY2hlY2tib3hcIixcblx0XHRcIm1lbnVpdGVtcmFkaW9cIixcblx0XHRcIm9wdGlvblwiLFxuXHRcdFwicmFkaW9cIixcblx0XHRcInJvd1wiLFxuXHRcdFwicm93aGVhZGVyXCIsXG5cdFx0XCJzd2l0Y2hcIixcblx0XHRcInRhYlwiLFxuXHRcdFwidG9vbHRpcFwiLFxuXHRcdFwidHJlZWl0ZW1cIixcblx0XSk7XG59XG5cbi8qKlxuICogVE9ETyBodHRwczovL2dpdGh1Yi5jb20vZXBzMWxvbi9kb20tYWNjZXNzaWJpbGl0eS1hcGkvaXNzdWVzLzEwMFxuICovXG5mdW5jdGlvbiBpc0Rlc2NlbmRhbnRPZk5hdGl2ZUhvc3RMYW5ndWFnZVRleHRBbHRlcm5hdGl2ZUVsZW1lbnQoXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgLS0gbm90IGltcGxlbWVudGVkIHlldFxuXHRub2RlOiBOb2RlLFxuKTogYm9vbGVhbiB7XG5cdHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0VmFsdWVPZlRleHRib3goZWxlbWVudDogRWxlbWVudCk6IHN0cmluZyB7XG5cdGlmIChpc0hUTUxJbnB1dEVsZW1lbnQoZWxlbWVudCkgfHwgaXNIVE1MVGV4dEFyZWFFbGVtZW50KGVsZW1lbnQpKSB7XG5cdFx0cmV0dXJuIGVsZW1lbnQudmFsdWU7XG5cdH1cblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2VwczFsb24vZG9tLWFjY2Vzc2liaWxpdHktYXBpL2lzc3Vlcy80XG5cdHJldHVybiBlbGVtZW50LnRleHRDb250ZW50IHx8IFwiXCI7XG59XG5cbmZ1bmN0aW9uIGdldFRleHR1YWxDb250ZW50KGRlY2xhcmF0aW9uOiBDU1NTdHlsZURlY2xhcmF0aW9uKTogc3RyaW5nIHtcblx0Y29uc3QgY29udGVudCA9IGRlY2xhcmF0aW9uLmdldFByb3BlcnR5VmFsdWUoXCJjb250ZW50XCIpO1xuXHRpZiAoL15bXCInXS4qW1wiJ10kLy50ZXN0KGNvbnRlbnQpKSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQuc2xpY2UoMSwgLTEpO1xuXHR9XG5cdHJldHVybiBcIlwiO1xufVxuXG4vKipcbiAqIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY2F0ZWdvcnktbGFiZWxcbiAqIFRPRE86IGZvcm0tYXNzb2NpYXRlZCBjdXN0b20gZWxlbWVudHNcbiAqIEBwYXJhbSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGlzTGFiZWxhYmxlRWxlbWVudChlbGVtZW50OiBFbGVtZW50KTogYm9vbGVhbiB7XG5cdGNvbnN0IGxvY2FsTmFtZSA9IGdldExvY2FsTmFtZShlbGVtZW50KTtcblxuXHRyZXR1cm4gKFxuXHRcdGxvY2FsTmFtZSA9PT0gXCJidXR0b25cIiB8fFxuXHRcdChsb2NhbE5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZShcInR5cGVcIikgIT09IFwiaGlkZGVuXCIpIHx8XG5cdFx0bG9jYWxOYW1lID09PSBcIm1ldGVyXCIgfHxcblx0XHRsb2NhbE5hbWUgPT09IFwib3V0cHV0XCIgfHxcblx0XHRsb2NhbE5hbWUgPT09IFwicHJvZ3Jlc3NcIiB8fFxuXHRcdGxvY2FsTmFtZSA9PT0gXCJzZWxlY3RcIiB8fFxuXHRcdGxvY2FsTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiXG5cdCk7XG59XG5cbi8qKlxuICogPiBbLi4uXSwgdGhlbiB0aGUgZmlyc3Qgc3VjaCBkZXNjZW5kYW50IGluIHRyZWUgb3JkZXIgaXMgdGhlIGxhYmVsIGVsZW1lbnQncyBsYWJlbGVkIGNvbnRyb2wuXG4gKiAtLSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2xhYmVsZWQtY29udHJvbFxuICogQHBhcmFtIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZmluZExhYmVsYWJsZUVsZW1lbnQoZWxlbWVudDogRWxlbWVudCk6IEVsZW1lbnQgfCBudWxsIHtcblx0aWYgKGlzTGFiZWxhYmxlRWxlbWVudChlbGVtZW50KSkge1xuXHRcdHJldHVybiBlbGVtZW50O1xuXHR9XG5cdGxldCBsYWJlbGFibGVFbGVtZW50OiBFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdGVsZW1lbnQuY2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZE5vZGUpID0+IHtcblx0XHRpZiAobGFiZWxhYmxlRWxlbWVudCA9PT0gbnVsbCAmJiBpc0VsZW1lbnQoY2hpbGROb2RlKSkge1xuXHRcdFx0Y29uc3QgZGVzY2VuZGFudExhYmVsYWJsZUVsZW1lbnQgPSBmaW5kTGFiZWxhYmxlRWxlbWVudChjaGlsZE5vZGUpO1xuXHRcdFx0aWYgKGRlc2NlbmRhbnRMYWJlbGFibGVFbGVtZW50ICE9PSBudWxsKSB7XG5cdFx0XHRcdGxhYmVsYWJsZUVsZW1lbnQgPSBkZXNjZW5kYW50TGFiZWxhYmxlRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBsYWJlbGFibGVFbGVtZW50O1xufVxuXG4vKipcbiAqIFBvbHlmaWxsIG9mIEhUTUxMYWJlbEVsZW1lbnQuY29udHJvbFxuICogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNsYWJlbGVkLWNvbnRyb2xcbiAqIEBwYXJhbSBsYWJlbFxuICovXG5mdW5jdGlvbiBnZXRDb250cm9sT2ZMYWJlbChsYWJlbDogSFRNTExhYmVsRWxlbWVudCk6IEVsZW1lbnQgfCBudWxsIHtcblx0aWYgKGxhYmVsLmNvbnRyb2wgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBsYWJlbC5jb250cm9sO1xuXHR9XG5cblx0Y29uc3QgaHRtbEZvciA9IGxhYmVsLmdldEF0dHJpYnV0ZShcImZvclwiKTtcblx0aWYgKGh0bWxGb3IgIT09IG51bGwpIHtcblx0XHRyZXR1cm4gbGFiZWwub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChodG1sRm9yKTtcblx0fVxuXG5cdHJldHVybiBmaW5kTGFiZWxhYmxlRWxlbWVudChsYWJlbCk7XG59XG5cbi8qKlxuICogUG9seWZpbGwgb2YgSFRNTElucHV0RWxlbWVudC5sYWJlbHNcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9IVE1MSW5wdXRFbGVtZW50L2xhYmVsc1xuICogQHBhcmFtIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0TGFiZWxzKGVsZW1lbnQ6IEVsZW1lbnQpOiBIVE1MTGFiZWxFbGVtZW50W10gfCBudWxsIHtcblx0Y29uc3QgbGFiZWxzUHJvcGVydHkgPSAoZWxlbWVudCBhcyBIVE1MSW5wdXRFbGVtZW50KS5sYWJlbHMgYXNcblx0XHR8IEhUTUxJbnB1dEVsZW1lbnRbXCJsYWJlbHNcIl1cblx0XHR8IHVuZGVmaW5lZDtcblxuXHRpZiAobGFiZWxzUHJvcGVydHkgPT09IG51bGwpIHtcblx0XHRyZXR1cm4gbGFiZWxzUHJvcGVydHk7XG5cdH1cblx0aWYgKGxhYmVsc1Byb3BlcnR5ICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gQXJyYXlGcm9tKGxhYmVsc1Byb3BlcnR5KTtcblx0fVxuXG5cdC8vIHBvbHlmaWxsXG5cdGlmICghaXNMYWJlbGFibGVFbGVtZW50KGVsZW1lbnQpKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblx0Y29uc3QgZG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG5cblx0cmV0dXJuIEFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwibGFiZWxcIikpLmZpbHRlcigobGFiZWwpID0+IHtcblx0XHRyZXR1cm4gZ2V0Q29udHJvbE9mTGFiZWwobGFiZWwpID09PSBlbGVtZW50O1xuXHR9KTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjb250ZW50cyBvZiBhIHNsb3QgdXNlZCBmb3IgY29tcHV0aW5nIHRoZSBhY2NuYW1lXG4gKiBAcGFyYW0gc2xvdFxuICovXG5mdW5jdGlvbiBnZXRTbG90Q29udGVudHMoc2xvdDogSFRNTFNsb3RFbGVtZW50KTogTm9kZVtdIHtcblx0Ly8gQ29tcHV0aW5nIHRoZSBhY2Nlc3NpYmxlIG5hbWUgZm9yIGVsZW1lbnRzIGNvbnRhaW5pbmcgc2xvdHMgaXMgbm90XG5cdC8vIGN1cnJlbnRseSBkZWZpbmVkIGluIHRoZSBzcGVjLiBUaGlzIGltcGxlbWVudGF0aW9uIHJlZmxlY3RzIHRoZVxuXHQvLyBiZWhhdmlvciBvZiBOVkRBIDIwMjAuMi9GaXJlZm94IDgxIGFuZCBpT1MgVm9pY2VPdmVyL1NhZmFyaSAxMy42LlxuXHRjb25zdCBhc3NpZ25lZE5vZGVzID0gc2xvdC5hc3NpZ25lZE5vZGVzKCk7XG5cdGlmIChhc3NpZ25lZE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdC8vIGlmIG5vIG5vZGVzIGFyZSBhc3NpZ25lZCB0byB0aGUgc2xvdCwgaXQgZGlzcGxheXMgdGhlIGRlZmF1bHQgY29udGVudFxuXHRcdHJldHVybiBBcnJheUZyb20oc2xvdC5jaGlsZE5vZGVzKTtcblx0fVxuXHRyZXR1cm4gYXNzaWduZWROb2Rlcztcbn1cblxuLyoqXG4gKiBpbXBsZW1lbnRzIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9hY2NuYW1lLyNtYXBwaW5nX2FkZGl0aW9uYWxfbmRfdGVcbiAqIEBwYXJhbSByb290XG4gKiBAcGFyYW0gb3B0aW9uc1xuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUZXh0QWx0ZXJuYXRpdmUoXG5cdHJvb3Q6IEVsZW1lbnQsXG5cdG9wdGlvbnM6IENvbXB1dGVUZXh0QWx0ZXJuYXRpdmVPcHRpb25zID0ge30sXG4pOiBzdHJpbmcge1xuXHRjb25zdCBjb25zdWx0ZWROb2RlcyA9IG5ldyBTZXRMaWtlPE5vZGU+KCk7XG5cblx0Y29uc3Qgd2luZG93ID0gc2FmZVdpbmRvdyhyb290KTtcblx0Y29uc3Qge1xuXHRcdGNvbXB1dGUgPSBcIm5hbWVcIixcblx0XHRjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50cyA9IG9wdGlvbnMuZ2V0Q29tcHV0ZWRTdHlsZSAhPT1cblx0XHRcdHVuZGVmaW5lZCxcblx0XHQvLyBUaGlzIG1pZ2h0IGJlIG92ZXJlbmdpbmVlcmVkLiBJIGRvbid0IGtub3cgd2hhdCBoYXBwZW5zIGlmIEkgY2FsbFxuXHRcdC8vIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnRGcm9tQW5vdGhlcldpbmRvdykgb3IgaWYgSSBkb24ndCBiaW5kIGl0XG5cdFx0Ly8gdGhlIHR5cGUgZGVjbGFyYXRpb25zIGRvbid0IHJlcXVpcmUgYSBgdGhpc2Bcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1wcm9wZXJ0aWVzXG5cdFx0Z2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLmJpbmQod2luZG93KSxcblx0XHRoaWRkZW4gPSBmYWxzZSxcblx0fSA9IG9wdGlvbnM7XG5cblx0Ly8gMkYuaVxuXHRmdW5jdGlvbiBjb21wdXRlTWlzY1RleHRBbHRlcm5hdGl2ZShcblx0XHRub2RlOiBOb2RlLFxuXHRcdGNvbnRleHQ6IHsgaXNFbWJlZGRlZEluTGFiZWw6IGJvb2xlYW47IGlzUmVmZXJlbmNlZDogYm9vbGVhbiB9LFxuXHQpOiBzdHJpbmcge1xuXHRcdGxldCBhY2N1bXVsYXRlZFRleHQgPSBcIlwiO1xuXHRcdGlmIChpc0VsZW1lbnQobm9kZSkgJiYgY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMpIHtcblx0XHRcdGNvbnN0IHBzZXVkb0JlZm9yZSA9IGdldENvbXB1dGVkU3R5bGUobm9kZSwgXCI6OmJlZm9yZVwiKTtcblx0XHRcdGNvbnN0IGJlZm9yZUNvbnRlbnQgPSBnZXRUZXh0dWFsQ29udGVudChwc2V1ZG9CZWZvcmUpO1xuXHRcdFx0YWNjdW11bGF0ZWRUZXh0ID0gYCR7YmVmb3JlQ29udGVudH0gJHthY2N1bXVsYXRlZFRleHR9YDtcblx0XHR9XG5cblx0XHQvLyBGSVhNRTogSW5jbHVkaW5nIGFyaWEtb3ducyBpcyBub3QgZGVmaW5lZCBpbiB0aGUgc3BlY1xuXHRcdC8vIEJ1dCBpdCBpcyByZXF1aXJlZCBpbiB0aGUgd2ViLXBsYXRmb3JtLXRlc3Rcblx0XHRjb25zdCBjaGlsZE5vZGVzID0gaXNIVE1MU2xvdEVsZW1lbnQobm9kZSlcblx0XHRcdD8gZ2V0U2xvdENvbnRlbnRzKG5vZGUpXG5cdFx0XHQ6IEFycmF5RnJvbShub2RlLmNoaWxkTm9kZXMpLmNvbmNhdChxdWVyeUlkUmVmcyhub2RlLCBcImFyaWEtb3duc1wiKSk7XG5cdFx0Y2hpbGROb2Rlcy5mb3JFYWNoKChjaGlsZCkgPT4ge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gY29tcHV0ZVRleHRBbHRlcm5hdGl2ZShjaGlsZCwge1xuXHRcdFx0XHRpc0VtYmVkZGVkSW5MYWJlbDogY29udGV4dC5pc0VtYmVkZGVkSW5MYWJlbCxcblx0XHRcdFx0aXNSZWZlcmVuY2VkOiBmYWxzZSxcblx0XHRcdFx0cmVjdXJzaW9uOiB0cnVlLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBUT0RPOiBVbmNsZWFyIHdoeSBkaXNwbGF5IGFmZmVjdHMgZGVsaW1pdGVyXG5cdFx0XHQvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3czYy9hY2NuYW1lL2lzc3Vlcy8zXG5cdFx0XHRjb25zdCBkaXNwbGF5ID0gaXNFbGVtZW50KGNoaWxkKVxuXHRcdFx0XHQ/IGdldENvbXB1dGVkU3R5bGUoY2hpbGQpLmdldFByb3BlcnR5VmFsdWUoXCJkaXNwbGF5XCIpXG5cdFx0XHRcdDogXCJpbmxpbmVcIjtcblx0XHRcdGNvbnN0IHNlcGFyYXRvciA9IGRpc3BsYXkgIT09IFwiaW5saW5lXCIgPyBcIiBcIiA6IFwiXCI7XG5cdFx0XHQvLyB0cmFpbGluZyBzZXBhcmF0b3IgZm9yIHdwdCB0ZXN0c1xuXHRcdFx0YWNjdW11bGF0ZWRUZXh0ICs9IGAke3NlcGFyYXRvcn0ke3Jlc3VsdH0ke3NlcGFyYXRvcn1gO1xuXHRcdH0pO1xuXG5cdFx0aWYgKGlzRWxlbWVudChub2RlKSAmJiBjb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50cykge1xuXHRcdFx0Y29uc3QgcHNldWRvQWZ0ZXIgPSBnZXRDb21wdXRlZFN0eWxlKG5vZGUsIFwiOjphZnRlclwiKTtcblx0XHRcdGNvbnN0IGFmdGVyQ29udGVudCA9IGdldFRleHR1YWxDb250ZW50KHBzZXVkb0FmdGVyKTtcblx0XHRcdGFjY3VtdWxhdGVkVGV4dCA9IGAke2FjY3VtdWxhdGVkVGV4dH0gJHthZnRlckNvbnRlbnR9YDtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWNjdW11bGF0ZWRUZXh0LnRyaW0oKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcGFyYW0gZWxlbWVudFxuXHQgKiBAcGFyYW0gYXR0cmlidXRlTmFtZVxuXHQgKiBAcmV0dXJucyBBIHN0cmluZyBub24tZW1wdHkgc3RyaW5nIG9yIGBudWxsYFxuXHQgKi9cblx0ZnVuY3Rpb24gdXNlQXR0cmlidXRlKFxuXHRcdGVsZW1lbnQ6IEVsZW1lbnQsXG5cdFx0YXR0cmlidXRlTmFtZTogc3RyaW5nLFxuXHQpOiBzdHJpbmcgfCBudWxsIHtcblx0XHRjb25zdCBhdHRyaWJ1dGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZU5vZGUoYXR0cmlidXRlTmFtZSk7XG5cdFx0aWYgKFxuXHRcdFx0YXR0cmlidXRlICE9PSBudWxsICYmXG5cdFx0XHQhY29uc3VsdGVkTm9kZXMuaGFzKGF0dHJpYnV0ZSkgJiZcblx0XHRcdGF0dHJpYnV0ZS52YWx1ZS50cmltKCkgIT09IFwiXCJcblx0XHQpIHtcblx0XHRcdGNvbnN1bHRlZE5vZGVzLmFkZChhdHRyaWJ1dGUpO1xuXHRcdFx0cmV0dXJuIGF0dHJpYnV0ZS52YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRmdW5jdGlvbiBjb21wdXRlVG9vbHRpcEF0dHJpYnV0ZVZhbHVlKG5vZGU6IE5vZGUpOiBzdHJpbmcgfCBudWxsIHtcblx0XHRpZiAoIWlzRWxlbWVudChub2RlKSkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVzZUF0dHJpYnV0ZShub2RlLCBcInRpdGxlXCIpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY29tcHV0ZUVsZW1lbnRUZXh0QWx0ZXJuYXRpdmUobm9kZTogTm9kZSk6IHN0cmluZyB8IG51bGwge1xuXHRcdGlmICghaXNFbGVtZW50KG5vZGUpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBodHRwczovL3czYy5naXRodWIuaW8vaHRtbC1hYW0vI2ZpZWxkc2V0LWFuZC1sZWdlbmQtZWxlbWVudHNcblx0XHRpZiAoaXNIVE1MRmllbGRTZXRFbGVtZW50KG5vZGUpKSB7XG5cdFx0XHRjb25zdWx0ZWROb2Rlcy5hZGQobm9kZSk7XG5cdFx0XHRjb25zdCBjaGlsZHJlbiA9IEFycmF5RnJvbShub2RlLmNoaWxkTm9kZXMpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFx0XHRpZiAoaXNIVE1MTGVnZW5kRWxlbWVudChjaGlsZCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcHV0ZVRleHRBbHRlcm5hdGl2ZShjaGlsZCwge1xuXHRcdFx0XHRcdFx0aXNFbWJlZGRlZEluTGFiZWw6IGZhbHNlLFxuXHRcdFx0XHRcdFx0aXNSZWZlcmVuY2VkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHJlY3Vyc2lvbjogZmFsc2UsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzSFRNTFRhYmxlRWxlbWVudChub2RlKSkge1xuXHRcdFx0Ly8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2h0bWwtYWFtLyN0YWJsZS1lbGVtZW50XG5cdFx0XHRjb25zdWx0ZWROb2Rlcy5hZGQobm9kZSk7XG5cdFx0XHRjb25zdCBjaGlsZHJlbiA9IEFycmF5RnJvbShub2RlLmNoaWxkTm9kZXMpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkgKz0gMSkge1xuXHRcdFx0XHRjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHRcdFx0XHRpZiAoaXNIVE1MVGFibGVDYXB0aW9uRWxlbWVudChjaGlsZCkpIHtcblx0XHRcdFx0XHRyZXR1cm4gY29tcHV0ZVRleHRBbHRlcm5hdGl2ZShjaGlsZCwge1xuXHRcdFx0XHRcdFx0aXNFbWJlZGRlZEluTGFiZWw6IGZhbHNlLFxuXHRcdFx0XHRcdFx0aXNSZWZlcmVuY2VkOiBmYWxzZSxcblx0XHRcdFx0XHRcdHJlY3Vyc2lvbjogZmFsc2UsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzU1ZHU1ZHRWxlbWVudChub2RlKSkge1xuXHRcdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3N2Zy1hYW0tMS4wL1xuXHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKG5vZGUpO1xuXHRcdFx0Y29uc3QgY2hpbGRyZW4gPSBBcnJheUZyb20obm9kZS5jaGlsZE5vZGVzKTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpICs9IDEpIHtcblx0XHRcdFx0Y29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0XHRcdFx0aWYgKGlzU1ZHVGl0bGVFbGVtZW50KGNoaWxkKSkge1xuXHRcdFx0XHRcdHJldHVybiBjaGlsZC50ZXh0Q29udGVudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSBlbHNlIGlmIChnZXRMb2NhbE5hbWUobm9kZSkgPT09IFwiaW1nXCIgfHwgZ2V0TG9jYWxOYW1lKG5vZGUpID09PSBcImFyZWFcIikge1xuXHRcdFx0Ly8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2h0bWwtYWFtLyNhcmVhLWVsZW1lbnRcblx0XHRcdC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9odG1sLWFhbS8jaW1nLWVsZW1lbnRcblx0XHRcdGNvbnN0IG5hbWVGcm9tQWx0ID0gdXNlQXR0cmlidXRlKG5vZGUsIFwiYWx0XCIpO1xuXHRcdFx0aWYgKG5hbWVGcm9tQWx0ICE9PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBuYW1lRnJvbUFsdDtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKGlzSFRNTE9wdEdyb3VwRWxlbWVudChub2RlKSkge1xuXHRcdFx0Y29uc3QgbmFtZUZyb21MYWJlbCA9IHVzZUF0dHJpYnV0ZShub2RlLCBcImxhYmVsXCIpO1xuXHRcdFx0aWYgKG5hbWVGcm9tTGFiZWwgIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIG5hbWVGcm9tTGFiZWw7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKFxuXHRcdFx0aXNIVE1MSW5wdXRFbGVtZW50KG5vZGUpICYmXG5cdFx0XHQobm9kZS50eXBlID09PSBcImJ1dHRvblwiIHx8XG5cdFx0XHRcdG5vZGUudHlwZSA9PT0gXCJzdWJtaXRcIiB8fFxuXHRcdFx0XHRub2RlLnR5cGUgPT09IFwicmVzZXRcIilcblx0XHQpIHtcblx0XHRcdC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9odG1sLWFhbS8jaW5wdXQtdHlwZS10ZXh0LWlucHV0LXR5cGUtcGFzc3dvcmQtaW5wdXQtdHlwZS1zZWFyY2gtaW5wdXQtdHlwZS10ZWwtaW5wdXQtdHlwZS1lbWFpbC1pbnB1dC10eXBlLXVybC1hbmQtdGV4dGFyZWEtZWxlbWVudC1hY2Nlc3NpYmxlLWRlc2NyaXB0aW9uLWNvbXB1dGF0aW9uXG5cdFx0XHRjb25zdCBuYW1lRnJvbVZhbHVlID0gdXNlQXR0cmlidXRlKG5vZGUsIFwidmFsdWVcIik7XG5cdFx0XHRpZiAobmFtZUZyb21WYWx1ZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gbmFtZUZyb21WYWx1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVE9ETzogbDEwblxuXHRcdFx0aWYgKG5vZGUudHlwZSA9PT0gXCJzdWJtaXRcIikge1xuXHRcdFx0XHRyZXR1cm4gXCJTdWJtaXRcIjtcblx0XHRcdH1cblx0XHRcdC8vIFRPRE86IGwxMG5cblx0XHRcdGlmIChub2RlLnR5cGUgPT09IFwicmVzZXRcIikge1xuXHRcdFx0XHRyZXR1cm4gXCJSZXNldFwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGxhYmVscyA9IGdldExhYmVscyhub2RlKTtcblx0XHRpZiAobGFiZWxzICE9PSBudWxsICYmIGxhYmVscy5sZW5ndGggIT09IDApIHtcblx0XHRcdGNvbnN1bHRlZE5vZGVzLmFkZChub2RlKTtcblx0XHRcdHJldHVybiBBcnJheUZyb20obGFiZWxzKVxuXHRcdFx0XHQubWFwKChlbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbXB1dGVUZXh0QWx0ZXJuYXRpdmUoZWxlbWVudCwge1xuXHRcdFx0XHRcdFx0aXNFbWJlZGRlZEluTGFiZWw6IHRydWUsXG5cdFx0XHRcdFx0XHRpc1JlZmVyZW5jZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0cmVjdXJzaW9uOiB0cnVlLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZmlsdGVyKChsYWJlbCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBsYWJlbC5sZW5ndGggPiAwO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuam9pbihcIiBcIik7XG5cdFx0fVxuXG5cdFx0Ly8gaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2h0bWwtYWFtLyNpbnB1dC10eXBlLWltYWdlLWFjY2Vzc2libGUtbmFtZS1jb21wdXRhdGlvblxuXHRcdC8vIFRPRE86IHdwdCB0ZXN0IGNvbnNpZGVyIGxhYmVsIGVsZW1lbnRzIGJ1dCBodG1sLWFhbSBkb2VzIG5vdCBtZW50aW9uIHRoZW1cblx0XHQvLyBXZSBmb2xsb3cgZXhpc3RpbmcgaW1wbGVtZW50YXRpb25zIG92ZXIgc3BlY1xuXHRcdGlmIChpc0hUTUxJbnB1dEVsZW1lbnQobm9kZSkgJiYgbm9kZS50eXBlID09PSBcImltYWdlXCIpIHtcblx0XHRcdGNvbnN0IG5hbWVGcm9tQWx0ID0gdXNlQXR0cmlidXRlKG5vZGUsIFwiYWx0XCIpO1xuXHRcdFx0aWYgKG5hbWVGcm9tQWx0ICE9PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBuYW1lRnJvbUFsdDtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbmFtZUZyb21UaXRsZSA9IHVzZUF0dHJpYnV0ZShub2RlLCBcInRpdGxlXCIpO1xuXHRcdFx0aWYgKG5hbWVGcm9tVGl0bGUgIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIG5hbWVGcm9tVGl0bGU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRPRE86IGwxMG5cblx0XHRcdHJldHVybiBcIlN1Ym1pdCBRdWVyeVwiO1xuXHRcdH1cblxuXHRcdGlmIChoYXNBbnlDb25jcmV0ZVJvbGVzKG5vZGUsIFtcImJ1dHRvblwiXSkpIHtcblx0XHRcdC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFhbS0xLjAvI2J1dHRvbi1lbGVtZW50XG5cdFx0XHRjb25zdCBuYW1lRnJvbVN1YlRyZWUgPSBjb21wdXRlTWlzY1RleHRBbHRlcm5hdGl2ZShub2RlLCB7XG5cdFx0XHRcdGlzRW1iZWRkZWRJbkxhYmVsOiBmYWxzZSxcblx0XHRcdFx0aXNSZWZlcmVuY2VkOiBmYWxzZSxcblx0XHRcdH0pO1xuXHRcdFx0aWYgKG5hbWVGcm9tU3ViVHJlZSAhPT0gXCJcIikge1xuXHRcdFx0XHRyZXR1cm4gbmFtZUZyb21TdWJUcmVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0ZnVuY3Rpb24gY29tcHV0ZVRleHRBbHRlcm5hdGl2ZShcblx0XHRjdXJyZW50OiBOb2RlLFxuXHRcdGNvbnRleHQ6IHtcblx0XHRcdGlzRW1iZWRkZWRJbkxhYmVsOiBib29sZWFuO1xuXHRcdFx0aXNSZWZlcmVuY2VkOiBib29sZWFuO1xuXHRcdFx0cmVjdXJzaW9uOiBib29sZWFuO1xuXHRcdH0sXG5cdCk6IHN0cmluZyB7XG5cdFx0aWYgKGNvbnN1bHRlZE5vZGVzLmhhcyhjdXJyZW50KSkge1xuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXG5cdFx0Ly8gMkFcblx0XHRpZiAoXG5cdFx0XHQhaGlkZGVuICYmXG5cdFx0XHRpc0hpZGRlbihjdXJyZW50LCBnZXRDb21wdXRlZFN0eWxlKSAmJlxuXHRcdFx0IWNvbnRleHQuaXNSZWZlcmVuY2VkXG5cdFx0KSB7XG5cdFx0XHRjb25zdWx0ZWROb2Rlcy5hZGQoY3VycmVudCk7XG5cdFx0XHRyZXR1cm4gXCJcIiBhcyBGbGF0U3RyaW5nO1xuXHRcdH1cblxuXHRcdC8vIDJCXG5cdFx0Y29uc3QgbGFiZWxBdHRyaWJ1dGVOb2RlID0gaXNFbGVtZW50KGN1cnJlbnQpXG5cdFx0XHQ/IGN1cnJlbnQuZ2V0QXR0cmlidXRlTm9kZShcImFyaWEtbGFiZWxsZWRieVwiKVxuXHRcdFx0OiBudWxsO1xuXHRcdC8vIFRPRE86IERvIHdlIGdlbmVyYWxseSBuZWVkIHRvIGJsb2NrIHF1ZXJ5IElkUmVmcyBvZiBhdHRyaWJ1dGVzIHdlIGhhdmUgYWxyZWFkeSBjb25zdWx0ZWQ/XG5cdFx0Y29uc3QgbGFiZWxFbGVtZW50cyA9XG5cdFx0XHRsYWJlbEF0dHJpYnV0ZU5vZGUgIT09IG51bGwgJiYgIWNvbnN1bHRlZE5vZGVzLmhhcyhsYWJlbEF0dHJpYnV0ZU5vZGUpXG5cdFx0XHRcdD8gcXVlcnlJZFJlZnMoY3VycmVudCwgXCJhcmlhLWxhYmVsbGVkYnlcIilcblx0XHRcdFx0OiBbXTtcblx0XHRpZiAoXG5cdFx0XHRjb21wdXRlID09PSBcIm5hbWVcIiAmJlxuXHRcdFx0IWNvbnRleHQuaXNSZWZlcmVuY2VkICYmXG5cdFx0XHRsYWJlbEVsZW1lbnRzLmxlbmd0aCA+IDBcblx0XHQpIHtcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uIC0tIENhbid0IGJlIG51bGwgaGVyZSBvdGhlcndpc2UgbGFiZWxFbGVtZW50cyB3b3VsZCBiZSBlbXB0eVxuXHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGxhYmVsQXR0cmlidXRlTm9kZSEpO1xuXG5cdFx0XHRyZXR1cm4gbGFiZWxFbGVtZW50c1xuXHRcdFx0XHQubWFwKChlbGVtZW50KSA9PiB7XG5cdFx0XHRcdFx0Ly8gVE9ETzogQ2hyb21lIHdpbGwgY29uc2lkZXIgcmVwZWF0ZWQgdmFsdWVzIGkuZS4gdXNlIGEgbm9kZSBtdWx0aXBsZSB0aW1lcyB3aGlsZSB3ZSdsbCBiYWlsIG91dCBpbiBjb21wdXRlVGV4dEFsdGVybmF0aXZlLlxuXHRcdFx0XHRcdHJldHVybiBjb21wdXRlVGV4dEFsdGVybmF0aXZlKGVsZW1lbnQsIHtcblx0XHRcdFx0XHRcdGlzRW1iZWRkZWRJbkxhYmVsOiBjb250ZXh0LmlzRW1iZWRkZWRJbkxhYmVsLFxuXHRcdFx0XHRcdFx0aXNSZWZlcmVuY2VkOiB0cnVlLFxuXHRcdFx0XHRcdFx0Ly8gdGhpcyBpc24ndCByZWN1cnNpb24gYXMgc3BlY2lmaWVkLCBvdGhlcndpc2Ugd2Ugd291bGQgc2tpcFxuXHRcdFx0XHRcdFx0Ly8gYGFyaWEtbGFiZWxgIGluXG5cdFx0XHRcdFx0XHQvLyA8aW5wdXQgaWQ9XCJteXNlbGZcIiBhcmlhLWxhYmVsPVwiZm9vXCIgYXJpYS1sYWJlbGxlZGJ5PVwibXlzZWxmXCJcblx0XHRcdFx0XHRcdHJlY3Vyc2lvbjogZmFsc2UsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5qb2luKFwiIFwiKTtcblx0XHR9XG5cblx0XHQvLyAyQ1xuXHRcdC8vIENoYW5nZWQgZnJvbSB0aGUgc3BlYyBpbiBhbnRpY2lwYXRpb24gb2YgaHR0cHM6Ly9naXRodWIuY29tL3czYy9hY2NuYW1lL2lzc3Vlcy82NFxuXHRcdC8vIHNwZWMgc2F5cyB3ZSBzaG91bGQgb25seSBjb25zaWRlciBza2lwcGluZyBpZiB3ZSBoYXZlIGEgbm9uLWVtcHR5IGxhYmVsXG5cdFx0Y29uc3Qgc2tpcFRvU3RlcDJFID1cblx0XHRcdGNvbnRleHQucmVjdXJzaW9uICYmIGlzQ29udHJvbChjdXJyZW50KSAmJiBjb21wdXRlID09PSBcIm5hbWVcIjtcblx0XHRpZiAoIXNraXBUb1N0ZXAyRSkge1xuXHRcdFx0Y29uc3QgYXJpYUxhYmVsID0gKFxuXHRcdFx0XHQoaXNFbGVtZW50KGN1cnJlbnQpICYmIGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSkgfHxcblx0XHRcdFx0XCJcIlxuXHRcdFx0KS50cmltKCk7XG5cdFx0XHRpZiAoYXJpYUxhYmVsICE9PSBcIlwiICYmIGNvbXB1dGUgPT09IFwibmFtZVwiKSB7XG5cdFx0XHRcdGNvbnN1bHRlZE5vZGVzLmFkZChjdXJyZW50KTtcblx0XHRcdFx0cmV0dXJuIGFyaWFMYWJlbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gMkRcblx0XHRcdGlmICghaXNNYXJrZWRQcmVzZW50YXRpb25hbChjdXJyZW50KSkge1xuXHRcdFx0XHRjb25zdCBlbGVtZW50VGV4dEFsdGVybmF0aXZlID0gY29tcHV0ZUVsZW1lbnRUZXh0QWx0ZXJuYXRpdmUoY3VycmVudCk7XG5cdFx0XHRcdGlmIChlbGVtZW50VGV4dEFsdGVybmF0aXZlICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0XHRcdHJldHVybiBlbGVtZW50VGV4dEFsdGVybmF0aXZlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gc3BlY2lhbCBjYXNpbmcsIGNoZWF0aW5nIHRvIG1ha2UgdGVzdHMgcGFzc1xuXHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93M2MvYWNjbmFtZS9pc3N1ZXMvNjdcblx0XHRpZiAoaGFzQW55Q29uY3JldGVSb2xlcyhjdXJyZW50LCBbXCJtZW51XCJdKSkge1xuXHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXG5cdFx0Ly8gMkVcblx0XHRpZiAoc2tpcFRvU3RlcDJFIHx8IGNvbnRleHQuaXNFbWJlZGRlZEluTGFiZWwgfHwgY29udGV4dC5pc1JlZmVyZW5jZWQpIHtcblx0XHRcdGlmIChoYXNBbnlDb25jcmV0ZVJvbGVzKGN1cnJlbnQsIFtcImNvbWJvYm94XCIsIFwibGlzdGJveFwiXSkpIHtcblx0XHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0XHRjb25zdCBzZWxlY3RlZE9wdGlvbnMgPSBxdWVyeVNlbGVjdGVkT3B0aW9ucyhjdXJyZW50KTtcblx0XHRcdFx0aWYgKHNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHQvLyBkZWZpbmVkIHBlciB0ZXN0IGBuYW1lX2hlYWRpbmdfY29tYm9ib3hgXG5cdFx0XHRcdFx0cmV0dXJuIGlzSFRNTElucHV0RWxlbWVudChjdXJyZW50KSA/IGN1cnJlbnQudmFsdWUgOiBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBBcnJheUZyb20oc2VsZWN0ZWRPcHRpb25zKVxuXHRcdFx0XHRcdC5tYXAoKHNlbGVjdGVkT3B0aW9uKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY29tcHV0ZVRleHRBbHRlcm5hdGl2ZShzZWxlY3RlZE9wdGlvbiwge1xuXHRcdFx0XHRcdFx0XHRpc0VtYmVkZGVkSW5MYWJlbDogY29udGV4dC5pc0VtYmVkZGVkSW5MYWJlbCxcblx0XHRcdFx0XHRcdFx0aXNSZWZlcmVuY2VkOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0cmVjdXJzaW9uOiB0cnVlLFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuam9pbihcIiBcIik7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFzQWJzdHJhY3RSb2xlKGN1cnJlbnQsIFwicmFuZ2VcIikpIHtcblx0XHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0XHRpZiAoY3VycmVudC5oYXNBdHRyaWJ1dGUoXCJhcmlhLXZhbHVldGV4dFwiKSkge1xuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uIC0tIHNhZmUgZHVlIHRvIGhhc0F0dHJpYnV0ZSBndWFyZFxuXHRcdFx0XHRcdHJldHVybiBjdXJyZW50LmdldEF0dHJpYnV0ZShcImFyaWEtdmFsdWV0ZXh0XCIpITtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoY3VycmVudC5oYXNBdHRyaWJ1dGUoXCJhcmlhLXZhbHVlbm93XCIpKSB7XG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb24gLS0gc2FmZSBkdWUgdG8gaGFzQXR0cmlidXRlIGd1YXJkXG5cdFx0XHRcdFx0cmV0dXJuIGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwiYXJpYS12YWx1ZW5vd1wiKSE7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB1c2UgdGhlIHZhbHVlIGFzIHNwZWNpZmllZCBieSBhIGhvc3QgbGFuZ3VhZ2UgYXR0cmlidXRlLlxuXHRcdFx0XHRyZXR1cm4gY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGhhc0FueUNvbmNyZXRlUm9sZXMoY3VycmVudCwgW1widGV4dGJveFwiXSkpIHtcblx0XHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0XHRyZXR1cm4gZ2V0VmFsdWVPZlRleHRib3goY3VycmVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gMkY6IGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9hY2NuYW1lLyNzdGVwMkZcblx0XHRpZiAoXG5cdFx0XHRhbGxvd3NOYW1lRnJvbUNvbnRlbnQoY3VycmVudCkgfHxcblx0XHRcdChpc0VsZW1lbnQoY3VycmVudCkgJiYgY29udGV4dC5pc1JlZmVyZW5jZWQpIHx8XG5cdFx0XHRpc05hdGl2ZUhvc3RMYW5ndWFnZVRleHRBbHRlcm5hdGl2ZUVsZW1lbnQoY3VycmVudCkgfHxcblx0XHRcdGlzRGVzY2VuZGFudE9mTmF0aXZlSG9zdExhbmd1YWdlVGV4dEFsdGVybmF0aXZlRWxlbWVudChjdXJyZW50KVxuXHRcdCkge1xuXHRcdFx0Y29uc3QgYWNjdW11bGF0ZWRUZXh0MkYgPSBjb21wdXRlTWlzY1RleHRBbHRlcm5hdGl2ZShjdXJyZW50LCB7XG5cdFx0XHRcdGlzRW1iZWRkZWRJbkxhYmVsOiBjb250ZXh0LmlzRW1iZWRkZWRJbkxhYmVsLFxuXHRcdFx0XHRpc1JlZmVyZW5jZWQ6IGZhbHNlLFxuXHRcdFx0fSk7XG5cdFx0XHRpZiAoYWNjdW11bGF0ZWRUZXh0MkYgIT09IFwiXCIpIHtcblx0XHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0XHRyZXR1cm4gYWNjdW11bGF0ZWRUZXh0MkY7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGN1cnJlbnQubm9kZVR5cGUgPT09IGN1cnJlbnQuVEVYVF9OT0RFKSB7XG5cdFx0XHRjb25zdWx0ZWROb2Rlcy5hZGQoY3VycmVudCk7XG5cdFx0XHRyZXR1cm4gY3VycmVudC50ZXh0Q29udGVudCB8fCBcIlwiO1xuXHRcdH1cblxuXHRcdGlmIChjb250ZXh0LnJlY3Vyc2lvbikge1xuXHRcdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdFx0cmV0dXJuIGNvbXB1dGVNaXNjVGV4dEFsdGVybmF0aXZlKGN1cnJlbnQsIHtcblx0XHRcdFx0aXNFbWJlZGRlZEluTGFiZWw6IGNvbnRleHQuaXNFbWJlZGRlZEluTGFiZWwsXG5cdFx0XHRcdGlzUmVmZXJlbmNlZDogZmFsc2UsXG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRjb25zdCB0b29sdGlwQXR0cmlidXRlVmFsdWUgPSBjb21wdXRlVG9vbHRpcEF0dHJpYnV0ZVZhbHVlKGN1cnJlbnQpO1xuXHRcdGlmICh0b29sdGlwQXR0cmlidXRlVmFsdWUgIT09IG51bGwpIHtcblx0XHRcdGNvbnN1bHRlZE5vZGVzLmFkZChjdXJyZW50KTtcblx0XHRcdHJldHVybiB0b29sdGlwQXR0cmlidXRlVmFsdWU7XG5cdFx0fVxuXG5cdFx0Ly8gVE9ETyBzaG91bGQgdGhpcyBiZSByZWFjaGFibGU/XG5cdFx0Y29uc3VsdGVkTm9kZXMuYWRkKGN1cnJlbnQpO1xuXHRcdHJldHVybiBcIlwiO1xuXHR9XG5cblx0cmV0dXJuIGFzRmxhdFN0cmluZyhcblx0XHRjb21wdXRlVGV4dEFsdGVybmF0aXZlKHJvb3QsIHtcblx0XHRcdGlzRW1iZWRkZWRJbkxhYmVsOiBmYWxzZSxcblx0XHRcdC8vIGJ5IHNwZWMgY29tcHV0ZUFjY2Vzc2libGVEZXNjcmlwdGlvbiBzdGFydHMgd2l0aCB0aGUgcmVmZXJlbmNlZCBlbGVtZW50cyBhcyByb290c1xuXHRcdFx0aXNSZWZlcmVuY2VkOiBjb21wdXRlID09PSBcImRlc2NyaXB0aW9uXCIsXG5cdFx0XHRyZWN1cnNpb246IGZhbHNlLFxuXHRcdH0pLFxuXHQpO1xufVxuIl0sIm5hbWVzIjpbIl9hcnJheSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1NldExpa2UiLCJfdXRpbCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiYXNGbGF0U3RyaW5nIiwicyIsInRyaW0iLCJyZXBsYWNlIiwiaXNIaWRkZW4iLCJub2RlIiwiZ2V0Q29tcHV0ZWRTdHlsZUltcGxlbWVudGF0aW9uIiwiaXNFbGVtZW50IiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwic3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwiaXNDb250cm9sIiwiaGFzQW55Q29uY3JldGVSb2xlcyIsImhhc0Fic3RyYWN0Um9sZSIsInJvbGUiLCJUeXBlRXJyb3IiLCJjb25jYXQiLCJxdWVyeVNlbGVjdG9yQWxsU3VidHJlZSIsImVsZW1lbnQiLCJzZWxlY3RvcnMiLCJlbGVtZW50cyIsIkFycmF5RnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJxdWVyeUlkUmVmcyIsImZvckVhY2giLCJyb290IiwicHVzaCIsImFwcGx5IiwicXVlcnlTZWxlY3RlZE9wdGlvbnMiLCJsaXN0Ym94IiwiaXNIVE1MU2VsZWN0RWxlbWVudCIsInNlbGVjdGVkT3B0aW9ucyIsImlzTWFya2VkUHJlc2VudGF0aW9uYWwiLCJwcmVzZW50YXRpb25Sb2xlcyIsImlzTmF0aXZlSG9zdExhbmd1YWdlVGV4dEFsdGVybmF0aXZlRWxlbWVudCIsImlzSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnQiLCJhbGxvd3NOYW1lRnJvbUNvbnRlbnQiLCJpc0Rlc2NlbmRhbnRPZk5hdGl2ZUhvc3RMYW5ndWFnZVRleHRBbHRlcm5hdGl2ZUVsZW1lbnQiLCJnZXRWYWx1ZU9mVGV4dGJveCIsImlzSFRNTElucHV0RWxlbWVudCIsImlzSFRNTFRleHRBcmVhRWxlbWVudCIsInZhbHVlIiwidGV4dENvbnRlbnQiLCJnZXRUZXh0dWFsQ29udGVudCIsImRlY2xhcmF0aW9uIiwiY29udGVudCIsInRlc3QiLCJzbGljZSIsImlzTGFiZWxhYmxlRWxlbWVudCIsImxvY2FsTmFtZSIsImdldExvY2FsTmFtZSIsImZpbmRMYWJlbGFibGVFbGVtZW50IiwibGFiZWxhYmxlRWxlbWVudCIsImNoaWxkTm9kZXMiLCJjaGlsZE5vZGUiLCJkZXNjZW5kYW50TGFiZWxhYmxlRWxlbWVudCIsImdldENvbnRyb2xPZkxhYmVsIiwibGFiZWwiLCJjb250cm9sIiwidW5kZWZpbmVkIiwiaHRtbEZvciIsIm93bmVyRG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldExhYmVscyIsImxhYmVsc1Byb3BlcnR5IiwibGFiZWxzIiwiZG9jdW1lbnQiLCJmaWx0ZXIiLCJnZXRTbG90Q29udGVudHMiLCJzbG90IiwiYXNzaWduZWROb2RlcyIsImxlbmd0aCIsImNvbXB1dGVUZXh0QWx0ZXJuYXRpdmUiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwiY29uc3VsdGVkTm9kZXMiLCJTZXRMaWtlIiwid2luZG93Iiwic2FmZVdpbmRvdyIsIl9vcHRpb25zJGNvbXB1dGUiLCJjb21wdXRlIiwiX29wdGlvbnMkY29tcHV0ZWRTdHlsIiwiY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMiLCJnZXRDb21wdXRlZFN0eWxlIiwiX29wdGlvbnMkZ2V0Q29tcHV0ZWRTIiwiYmluZCIsIl9vcHRpb25zJGhpZGRlbiIsImhpZGRlbiIsImNvbXB1dGVNaXNjVGV4dEFsdGVybmF0aXZlIiwiY29udGV4dCIsImFjY3VtdWxhdGVkVGV4dCIsInBzZXVkb0JlZm9yZSIsImJlZm9yZUNvbnRlbnQiLCJpc0hUTUxTbG90RWxlbWVudCIsImNoaWxkIiwicmVzdWx0IiwiaXNFbWJlZGRlZEluTGFiZWwiLCJpc1JlZmVyZW5jZWQiLCJyZWN1cnNpb24iLCJkaXNwbGF5Iiwic2VwYXJhdG9yIiwicHNldWRvQWZ0ZXIiLCJhZnRlckNvbnRlbnQiLCJ1c2VBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVOYW1lIiwiYXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlTm9kZSIsImhhcyIsImFkZCIsImNvbXB1dGVUb29sdGlwQXR0cmlidXRlVmFsdWUiLCJjb21wdXRlRWxlbWVudFRleHRBbHRlcm5hdGl2ZSIsImlzSFRNTEZpZWxkU2V0RWxlbWVudCIsImNoaWxkcmVuIiwiaSIsImlzSFRNTExlZ2VuZEVsZW1lbnQiLCJpc0hUTUxUYWJsZUVsZW1lbnQiLCJpc1NWR1NWR0VsZW1lbnQiLCJpc1NWR1RpdGxlRWxlbWVudCIsIm5hbWVGcm9tQWx0IiwiaXNIVE1MT3B0R3JvdXBFbGVtZW50IiwibmFtZUZyb21MYWJlbCIsInR5cGUiLCJuYW1lRnJvbVZhbHVlIiwibWFwIiwiam9pbiIsIm5hbWVGcm9tVGl0bGUiLCJuYW1lRnJvbVN1YlRyZWUiLCJjdXJyZW50IiwibGFiZWxBdHRyaWJ1dGVOb2RlIiwibGFiZWxFbGVtZW50cyIsInNraXBUb1N0ZXAyRSIsImFyaWFMYWJlbCIsImVsZW1lbnRUZXh0QWx0ZXJuYXRpdmUiLCJzZWxlY3RlZE9wdGlvbiIsImFjY3VtdWxhdGVkVGV4dDJGIiwibm9kZVR5cGUiLCJURVhUX05PREUiLCJ0b29sdGlwQXR0cmlidXRlVmFsdWUiXSwibWFwcGluZ3MiOiI7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQSxDQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBLENBQUE7QUFDQSxJQUFBRSxLQUFBLEdBQUFGLE9BQUEsQ0FBQTtBQWtCZ0IsU0FBQUQsdUJBQUFJLEdBQUE7SUFBQSxPQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEdBQUE7UUFBQUUsT0FBQSxFQUFBRixHQUFBO0lBQUE7QUFBQTtBQXZCaEI7O0NBRUEsR0F1QkE7O0NBRUEs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