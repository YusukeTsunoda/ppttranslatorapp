{"version":3,"file":"util.js","sources":["../sources/util.ts"],"sourcesContent":["export { getLocalName } from \"./getRole\";\nimport getRole, { getLocalName } from \"./getRole\";\n\nexport function isElement(node: Node | null): node is Element {\n\treturn node !== null && node.nodeType === node.ELEMENT_NODE;\n}\n\nexport function isHTMLTableCaptionElement(\n\tnode: Node | null\n): node is HTMLTableCaptionElement {\n\treturn isElement(node) && getLocalName(node) === \"caption\";\n}\n\nexport function isHTMLInputElement(\n\tnode: Node | null\n): node is HTMLInputElement {\n\treturn isElement(node) && getLocalName(node) === \"input\";\n}\n\nexport function isHTMLOptGroupElement(\n\tnode: Node | null\n): node is HTMLOptGroupElement {\n\treturn isElement(node) && getLocalName(node) === \"optgroup\";\n}\n\nexport function isHTMLSelectElement(\n\tnode: Node | null\n): node is HTMLSelectElement {\n\treturn isElement(node) && getLocalName(node) === \"select\";\n}\n\nexport function isHTMLTableElement(\n\tnode: Node | null\n): node is HTMLTableElement {\n\treturn isElement(node) && getLocalName(node) === \"table\";\n}\n\nexport function isHTMLTextAreaElement(\n\tnode: Node | null\n): node is HTMLTextAreaElement {\n\treturn isElement(node) && getLocalName(node) === \"textarea\";\n}\n\nexport function safeWindow(node: Node): Window {\n\tconst { defaultView } =\n\t\tnode.ownerDocument === null ? (node as Document) : node.ownerDocument;\n\n\tif (defaultView === null) {\n\t\tthrow new TypeError(\"no window available\");\n\t}\n\treturn defaultView;\n}\n\nexport function isHTMLFieldSetElement(\n\tnode: Node | null\n): node is HTMLFieldSetElement {\n\treturn isElement(node) && getLocalName(node) === \"fieldset\";\n}\n\nexport function isHTMLLegendElement(\n\tnode: Node | null\n): node is HTMLLegendElement {\n\treturn isElement(node) && getLocalName(node) === \"legend\";\n}\n\nexport function isHTMLSlotElement(node: Node | null): node is HTMLSlotElement {\n\treturn isElement(node) && getLocalName(node) === \"slot\";\n}\n\nexport function isSVGElement(node: Node | null): node is SVGElement {\n\treturn isElement(node) && (node as SVGElement).ownerSVGElement !== undefined;\n}\n\nexport function isSVGSVGElement(node: Node | null): node is SVGSVGElement {\n\treturn isElement(node) && getLocalName(node) === \"svg\";\n}\n\nexport function isSVGTitleElement(node: Node | null): node is SVGTitleElement {\n\treturn isSVGElement(node) && getLocalName(node) === \"title\";\n}\n\n/**\n *\n * @param {Node} node -\n * @param {string} attributeName -\n * @returns {Element[]} -\n */\nexport function queryIdRefs(node: Node, attributeName: string): Element[] {\n\tif (isElement(node) && node.hasAttribute(attributeName)) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute check\n\t\tconst ids = node.getAttribute(attributeName)!.split(\" \");\n\n\t\t// Browsers that don't support shadow DOM won't have getRootNode\n\t\tconst root = node.getRootNode\n\t\t\t? (node.getRootNode() as Document | ShadowRoot)\n\t\t\t: node.ownerDocument;\n\n\t\treturn ids\n\t\t\t.map((id) => root.getElementById(id))\n\t\t\t.filter(\n\t\t\t\t(element: Element | null): element is Element => element !== null\n\t\t\t\t// TODO: why does this not narrow?\n\t\t\t) as Element[];\n\t}\n\n\treturn [];\n}\n\nexport function hasAnyConcreteRoles(\n\tnode: Node,\n\troles: Array<string | null>\n): node is Element {\n\tif (isElement(node)) {\n\t\treturn roles.indexOf(getRole(node)) !== -1;\n\t}\n\treturn false;\n}\n"],"names":["isElement","node","nodeType","ELEMENT_NODE","isHTMLTableCaptionElement","getLocalName","isHTMLInputElement","isHTMLOptGroupElement","isHTMLSelectElement","isHTMLTableElement","isHTMLTextAreaElement","safeWindow","ownerDocument","defaultView","TypeError","isHTMLFieldSetElement","isHTMLLegendElement","isHTMLSlotElement","isSVGElement","ownerSVGElement","undefined","isSVGSVGElement","isSVGTitleElement","queryIdRefs","attributeName","hasAttribute","ids","getAttribute","split","root","getRootNode","map","id","getElementById","filter","element","hasAnyConcreteRoles","roles","indexOf","getRole"],"mappings":"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"}