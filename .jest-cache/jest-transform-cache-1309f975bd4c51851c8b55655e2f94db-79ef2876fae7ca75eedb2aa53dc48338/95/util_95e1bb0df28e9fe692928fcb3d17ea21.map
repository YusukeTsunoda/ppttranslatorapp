{"version":3,"file":"util.js","sources":["../sources/util.ts"],"sourcesContent":["export { getLocalName } from \"./getRole\";\nimport getRole, { getLocalName } from \"./getRole\";\n\nexport const presentationRoles = [\"presentation\", \"none\"];\n\nexport function isElement(node: Node | null): node is Element {\n\treturn node !== null && node.nodeType === node.ELEMENT_NODE;\n}\n\nexport function isHTMLTableCaptionElement(\n\tnode: Node | null,\n): node is HTMLTableCaptionElement {\n\treturn isElement(node) && getLocalName(node) === \"caption\";\n}\n\nexport function isHTMLInputElement(\n\tnode: Node | null,\n): node is HTMLInputElement {\n\treturn isElement(node) && getLocalName(node) === \"input\";\n}\n\nexport function isHTMLOptGroupElement(\n\tnode: Node | null,\n): node is HTMLOptGroupElement {\n\treturn isElement(node) && getLocalName(node) === \"optgroup\";\n}\n\nexport function isHTMLSelectElement(\n\tnode: Node | null,\n): node is HTMLSelectElement {\n\treturn isElement(node) && getLocalName(node) === \"select\";\n}\n\nexport function isHTMLTableElement(\n\tnode: Node | null,\n): node is HTMLTableElement {\n\treturn isElement(node) && getLocalName(node) === \"table\";\n}\n\nexport function isHTMLTextAreaElement(\n\tnode: Node | null,\n): node is HTMLTextAreaElement {\n\treturn isElement(node) && getLocalName(node) === \"textarea\";\n}\n\nexport function safeWindow(node: Node): Window {\n\tconst { defaultView } =\n\t\tnode.ownerDocument === null ? (node as Document) : node.ownerDocument;\n\n\tif (defaultView === null) {\n\t\tthrow new TypeError(\"no window available\");\n\t}\n\treturn defaultView;\n}\n\nexport function isHTMLFieldSetElement(\n\tnode: Node | null,\n): node is HTMLFieldSetElement {\n\treturn isElement(node) && getLocalName(node) === \"fieldset\";\n}\n\nexport function isHTMLLegendElement(\n\tnode: Node | null,\n): node is HTMLLegendElement {\n\treturn isElement(node) && getLocalName(node) === \"legend\";\n}\n\nexport function isHTMLSlotElement(node: Node | null): node is HTMLSlotElement {\n\treturn isElement(node) && getLocalName(node) === \"slot\";\n}\n\nexport function isSVGElement(node: Node | null): node is SVGElement {\n\treturn isElement(node) && (node as SVGElement).ownerSVGElement !== undefined;\n}\n\nexport function isSVGSVGElement(node: Node | null): node is SVGSVGElement {\n\treturn isElement(node) && getLocalName(node) === \"svg\";\n}\n\nexport function isSVGTitleElement(node: Node | null): node is SVGTitleElement {\n\treturn isSVGElement(node) && getLocalName(node) === \"title\";\n}\n\n/**\n *\n * @param {Node} node -\n * @param {string} attributeName -\n * @returns {Element[]} -\n */\nexport function queryIdRefs(node: Node, attributeName: string): Element[] {\n\tif (isElement(node) && node.hasAttribute(attributeName)) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- safe due to hasAttribute check\n\t\tconst ids = node.getAttribute(attributeName)!.split(\" \");\n\n\t\t// Browsers that don't support shadow DOM won't have getRootNode\n\t\tconst root = node.getRootNode\n\t\t\t? (node.getRootNode() as Document | ShadowRoot)\n\t\t\t: node.ownerDocument;\n\n\t\treturn ids\n\t\t\t.map((id) => root.getElementById(id))\n\t\t\t.filter(\n\t\t\t\t(element: Element | null): element is Element => element !== null,\n\t\t\t\t// TODO: why does this not narrow?\n\t\t\t) as Element[];\n\t}\n\n\treturn [];\n}\n\nexport function hasAnyConcreteRoles(\n\tnode: Node,\n\troles: Array<string | null>,\n): node is Element {\n\tif (isElement(node)) {\n\t\treturn roles.indexOf(getRole(node)) !== -1;\n\t}\n\treturn false;\n}\n"],"names":["_getRole","_interopRequireWildcard","require","exports","getLocalName","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","presentationRoles","isElement","node","nodeType","ELEMENT_NODE","isHTMLTableCaptionElement","isHTMLInputElement","isHTMLOptGroupElement","isHTMLSelectElement","isHTMLTableElement","isHTMLTextAreaElement","safeWindow","_ref","ownerDocument","defaultView","TypeError","isHTMLFieldSetElement","isHTMLLegendElement","isHTMLSlotElement","isSVGElement","ownerSVGElement","undefined","isSVGSVGElement","isSVGTitleElement","queryIdRefs","attributeName","hasAttribute","ids","getAttribute","split","root","getRootNode","map","id","getElementById","filter","element","hasAnyConcreteRoles","roles","indexOf","getRole"],"mappings":"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"}