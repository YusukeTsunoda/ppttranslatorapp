{"version":3,"sources":["/Users/yusuketsunoda/Documents/cursor/ppttranslatorapp/worktrees/cicd-setup/tests/utils/test-utils.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\nimport fs from 'fs';\nimport { NextRequest, NextResponse } from 'next/server';\n\n// Prismaのモック\nexport const mockPrisma = {\n  user: {\n    findUnique: jest.fn(),\n    findMany: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n    delete: jest.fn(),\n  },\n  file: {\n    findUnique: jest.fn(),\n    create: jest.fn(),\n    update: jest.fn(),\n  },\n  translationHistory: {\n    create: jest.fn(),\n    findMany: jest.fn(),\n    findUnique: jest.fn(),\n  },\n  $executeRaw: jest.fn(),\n  $queryRaw: jest.fn(),\n} as unknown as PrismaClient;\n\n// ファイルシステムのモック\nexport const mockFs = {\n  ...fs,\n  createReadStream: jest.fn(),\n  existsSync: jest.fn(),\n  promises: {\n    ...fs.promises,\n    readFile: jest.fn(),\n    writeFile: jest.fn(),\n    unlink: jest.fn(),\n  },\n};\n\n// Next.jsのAPIルートヘルパー\nexport const createMockRequest = (method: string, body?: any, headers?: HeadersInit): NextRequest => {\n  const req = new NextRequest(new URL('http://localhost:3000'), {\n    method,\n    body: body ? JSON.stringify(body) : undefined,\n    headers,\n  });\n  return req;\n};\n\nexport const createMockResponse = () => {\n  return {\n    status: jest.fn().mockReturnThis(),\n    json: jest.fn(),\n  } as unknown as NextResponse;\n}; "],"names":["createMockRequest","createMockResponse","mockFs","mockPrisma","user","findUnique","jest","fn","findMany","create","update","delete","file","translationHistory","$executeRaw","$queryRaw","fs","createReadStream","existsSync","promises","readFile","writeFile","unlink","method","body","headers","req","NextRequest","URL","JSON","stringify","undefined","status","mockReturnThis","json"],"mappings":";;;;;;;;;;;IAyCaA,iBAAiB;eAAjBA;;IASAC,kBAAkB;eAAlBA;;IAtBAC,MAAM;eAANA;;IAvBAC,UAAU;eAAVA;;;;6DAJE;wBAC2B;AAGnC,MAAMA,aAAa;IACxBC,MAAM;QACJC,YAAYC,KAAKC,EAAE;QACnBC,UAAUF,KAAKC,EAAE;QACjBE,QAAQH,KAAKC,EAAE;QACfG,QAAQJ,KAAKC,EAAE;QACfI,QAAQL,KAAKC,EAAE;IACjB;IACAK,MAAM;QACJP,YAAYC,KAAKC,EAAE;QACnBE,QAAQH,KAAKC,EAAE;QACfG,QAAQJ,KAAKC,EAAE;IACjB;IACAM,oBAAoB;QAClBJ,QAAQH,KAAKC,EAAE;QACfC,UAAUF,KAAKC,EAAE;QACjBF,YAAYC,KAAKC,EAAE;IACrB;IACAO,aAAaR,KAAKC,EAAE;IACpBQ,WAAWT,KAAKC,EAAE;AACpB;AAGO,MAAML,SAAS;IACpB,GAAGc,WAAE;IACLC,kBAAkBX,KAAKC,EAAE;IACzBW,YAAYZ,KAAKC,EAAE;IACnBY,UAAU;QACR,GAAGH,WAAE,CAACG,QAAQ;QACdC,UAAUd,KAAKC,EAAE;QACjBc,WAAWf,KAAKC,EAAE;QAClBe,QAAQhB,KAAKC,EAAE;IACjB;AACF;AAGO,MAAMP,oBAAoB,CAACuB,QAAgBC,MAAYC;IAC5D,MAAMC,MAAM,IAAIC,mBAAW,CAAC,IAAIC,IAAI,0BAA0B;QAC5DL;QACAC,MAAMA,OAAOK,KAAKC,SAAS,CAACN,QAAQO;QACpCN;IACF;IACA,OAAOC;AACT;AAEO,MAAMzB,qBAAqB;IAChC,OAAO;QACL+B,QAAQ1B,KAAKC,EAAE,GAAG0B,cAAc;QAChCC,MAAM5B,KAAKC,EAAE;IACf;AACF"}