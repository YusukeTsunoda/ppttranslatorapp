afb10b21c0cf459049d84c3b77c6d991
"use strict";
// Anthropic SDKのモック
jest.mock('@anthropic-ai/sdk');
// getServerSessionのモック
jest.mock('next-auth', ()=>({
        getServerSession: jest.fn()
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _interop_require_default = require("@swc/helpers/_/_interop_require_default");
const _route = require("@/app/api/translate/route");
const _server = require("next/server");
const _nextauth = require("next-auth");
const _client = require("@prisma/client");
const _mockSetup = require("@/tests/helpers/mockSetup");
const _sdk = /*#__PURE__*/ _interop_require_default._(require("@anthropic-ai/sdk"));
// console.logのモック
const mockConsoleLog = jest.spyOn(console, 'log').mockImplementation();
const mockConsoleError = jest.spyOn(console, 'error').mockImplementation();
const prismaMock = (0, _mockSetup.createPrismaMock)();
const getServerSessionMock = _nextauth.getServerSession;
describe('POST /api/translate', ()=>{
    const mockAnthropicMessages = {
        create: jest.fn()
    };
    beforeEach(()=>{
        (0, _mockSetup.clearAllMocks)();
        process.env.ANTHROPIC_API_KEY = 'test-api-key';
        _sdk.default.mockImplementation(()=>({
                messages: mockAnthropicMessages
            }));
    });
    afterEach(()=>{
        mockConsoleLog.mockClear();
        mockConsoleError.mockClear();
    });
    it('should translate text successfully', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id',
            isPremium: true,
            credits: 10
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        const mockFile = {
            id: 'test-file-id',
            name: 'test.pptx'
        };
        prismaMock.file.findUnique.mockResolvedValue(mockFile);
        prismaMock.user.findUnique.mockResolvedValue(mockUser);
        prismaMock.user.update.mockResolvedValue({
            ...mockUser,
            credits: 9
        });
        prismaMock.translationHistory.create.mockResolvedValue({
            id: 'test-history-id',
            userId: mockUser.id,
            fileId: mockFile.id,
            status: _client.TranslationStatus.COMPLETED
        });
        mockAnthropicMessages.create.mockResolvedValue({
            content: [
                {
                    text: '翻訳されたテキスト'
                }
            ]
        });
        const requestBody = {
            texts: [
                'Hello'
            ],
            sourceLang: _client.Language.EN,
            targetLang: _client.Language.JA,
            model: 'claude-3-haiku-20240307',
            fileName: 'test.pptx',
            fileId: 'test-file-id',
            slides: [
                {
                    index: 0,
                    texts: [
                        {
                            text: 'Hello',
                            index: 0
                        }
                    ]
                }
            ]
        };
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify(requestBody),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(200);
        expect(responseBody.success).toBe(true);
        expect(responseBody.translatedSlides).toHaveLength(1);
        expect(responseBody.translatedSlides[0].translations[0].text).toBe('翻訳されたテキスト');
        expect(prismaMock.user.update).toHaveBeenCalledWith({
            where: {
                id: mockUser.id
            },
            data: {
                credits: {
                    decrement: 1
                }
            }
        });
    });
    it('should return 401 if not authenticated', async ()=>{
        getServerSessionMock.mockResolvedValue(null);
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({}),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(401);
        expect(responseBody.error).toBe('認証が必要です');
    });
    it('should return 400 if fileId is missing', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id'
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({
                texts: [
                    'Hello'
                ],
                sourceLang: _client.Language.EN,
                targetLang: _client.Language.JA
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(400);
        expect(responseBody.error).toBe('ファイルIDが必要です');
    });
    it('should return 404 if file not found', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id'
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        prismaMock.file.findUnique.mockResolvedValue(null);
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({
                texts: [
                    'Hello'
                ],
                sourceLang: _client.Language.EN,
                targetLang: _client.Language.JA,
                fileId: 'non-existent-file-id'
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(404);
        expect(responseBody.error).toBe('指定されたファイルIDがデータベースに存在しません');
    });
    it('should return 403 if user has insufficient credits', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id',
            credits: 0
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        const mockFile = {
            id: 'test-file-id',
            name: 'test.pptx'
        };
        prismaMock.file.findUnique.mockResolvedValue(mockFile);
        prismaMock.user.findUnique.mockResolvedValue(mockUser);
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({
                texts: [
                    'Hello'
                ],
                sourceLang: _client.Language.EN,
                targetLang: _client.Language.JA,
                fileId: 'test-file-id',
                slides: [
                    {
                        index: 0,
                        texts: [
                            {
                                text: 'Hello',
                                index: 0
                            }
                        ]
                    }
                ]
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(403);
        expect(responseBody.error).toBe('クレジットが不足しています');
        expect(responseBody.availableCredits).toBe(0);
        expect(responseBody.requiredCredits).toBe(1);
    });
    it('should use default model for non-premium users', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id',
            isPremium: false,
            credits: 10
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        const mockFile = {
            id: 'test-file-id',
            name: 'test.pptx'
        };
        prismaMock.file.findUnique.mockResolvedValue(mockFile);
        prismaMock.user.findUnique.mockResolvedValue(mockUser);
        prismaMock.user.update.mockResolvedValue({
            ...mockUser,
            credits: 9
        });
        mockAnthropicMessages.create.mockResolvedValue({
            content: [
                {
                    text: '翻訳されたテキスト'
                }
            ]
        });
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({
                texts: [
                    'Hello'
                ],
                sourceLang: _client.Language.EN,
                targetLang: _client.Language.JA,
                model: 'claude-3-opus-20240229',
                fileId: 'test-file-id',
                slides: [
                    {
                        index: 0,
                        texts: [
                            {
                                text: 'Hello',
                                index: 0
                            }
                        ]
                    }
                ]
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        await (0, _route.POST)(req);
        expect(mockAnthropicMessages.create).toHaveBeenCalledWith(expect.objectContaining({
            model: 'claude-3-haiku-20240307'
        }));
    });
    it('should handle translation API errors', async ()=>{
        const mockUser = (0, _mockSetup.createMockUser)({
            id: 'test-user-id',
            credits: 10
        });
        getServerSessionMock.mockResolvedValue({
            user: mockUser
        });
        const mockFile = {
            id: 'test-file-id',
            name: 'test.pptx'
        };
        prismaMock.file.findUnique.mockResolvedValue(mockFile);
        prismaMock.user.findUnique.mockResolvedValue(mockUser);
        mockAnthropicMessages.create.mockRejectedValue(new Error('API Error'));
        const req = new _server.NextRequest('http://localhost/api/translate', {
            method: 'POST',
            body: JSON.stringify({
                texts: [
                    'Hello'
                ],
                sourceLang: _client.Language.EN,
                targetLang: _client.Language.JA,
                fileId: 'test-file-id',
                slides: [
                    {
                        index: 0,
                        texts: [
                            {
                                text: 'Hello',
                                index: 0
                            }
                        ]
                    }
                ]
            }),
            headers: {
                'Content-Type': 'application/json'
            }
        });
        const response = await (0, _route.POST)(req);
        const responseBody = await response.json();
        expect(response.status).toBe(500);
        expect(responseBody.error).toBe('翻訳に失敗しました');
        expect(prismaMock.translationHistory.create).toHaveBeenCalledWith(expect.objectContaining({
            status: _client.TranslationStatus.FAILED,
            errorMessage: expect.any(String)
        }));
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy95dXN1a2V0c3Vub2RhL0RvY3VtZW50cy9jdXJzb3IvcHB0dHJhbnNsYXRvcmFwcC93b3JrdHJlZXMvY2ljZC1zZXR1cC90ZXN0cy9hcGkvdHJhbnNsYXRlL3JvdXRlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUE9TVCB9IGZyb20gJ0AvYXBwL2FwaS90cmFuc2xhdGUvcm91dGUnO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCB7IExhbmd1YWdlLCBUcmFuc2xhdGlvblN0YXR1cyB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcbmltcG9ydCB7IGNyZWF0ZVByaXNtYU1vY2ssIGNyZWF0ZU1vY2tVc2VyLCBjbGVhckFsbE1vY2tzIH0gZnJvbSAnQC90ZXN0cy9oZWxwZXJzL21vY2tTZXR1cCc7XG5pbXBvcnQgQW50aHJvcGljIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJztcblxuLy8gQW50aHJvcGljIFNES+OBruODouODg+OCr1xuamVzdC5tb2NrKCdAYW50aHJvcGljLWFpL3NkaycpO1xuXG4vLyBnZXRTZXJ2ZXJTZXNzaW9u44Gu44Oi44OD44KvXG5qZXN0Lm1vY2soJ25leHQtYXV0aCcsICgpID0+ICh7XG4gIGdldFNlcnZlclNlc3Npb246IGplc3QuZm4oKSxcbn0pKTtcblxuLy8gY29uc29sZS5sb2fjga7jg6Ljg4Pjgq9cbmNvbnN0IG1vY2tDb25zb2xlTG9nID0gamVzdC5zcHlPbihjb25zb2xlLCAnbG9nJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XG5jb25zdCBtb2NrQ29uc29sZUVycm9yID0gamVzdC5zcHlPbihjb25zb2xlLCAnZXJyb3InKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcblxuY29uc3QgcHJpc21hTW9jayA9IGNyZWF0ZVByaXNtYU1vY2soKTtcbmNvbnN0IGdldFNlcnZlclNlc3Npb25Nb2NrID0gZ2V0U2VydmVyU2Vzc2lvbiBhcyBqZXN0Lk1vY2s7XG5cbmRlc2NyaWJlKCdQT1NUIC9hcGkvdHJhbnNsYXRlJywgKCkgPT4ge1xuICBjb25zdCBtb2NrQW50aHJvcGljTWVzc2FnZXMgPSB7XG4gICAgY3JlYXRlOiBqZXN0LmZuKCksXG4gIH07XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgY2xlYXJBbGxNb2NrcygpO1xuICAgIHByb2Nlc3MuZW52LkFOVEhST1BJQ19BUElfS0VZID0gJ3Rlc3QtYXBpLWtleSc7XG4gICAgKEFudGhyb3BpYyBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgICAgbWVzc2FnZXM6IG1vY2tBbnRocm9waWNNZXNzYWdlcyxcbiAgICB9KSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgbW9ja0NvbnNvbGVMb2cubW9ja0NsZWFyKCk7XG4gICAgbW9ja0NvbnNvbGVFcnJvci5tb2NrQ2xlYXIoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCB0cmFuc2xhdGUgdGV4dCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1VzZXIgPSBjcmVhdGVNb2NrVXNlcih7XG4gICAgICBpZDogJ3Rlc3QtdXNlci1pZCcsXG4gICAgICBpc1ByZW1pdW06IHRydWUsXG4gICAgICBjcmVkaXRzOiAxMCxcbiAgICB9KTtcblxuICAgIGdldFNlcnZlclNlc3Npb25Nb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIHVzZXI6IG1vY2tVc2VyLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbW9ja0ZpbGUgPSB7XG4gICAgICBpZDogJ3Rlc3QtZmlsZS1pZCcsXG4gICAgICBuYW1lOiAndGVzdC5wcHR4JyxcbiAgICB9O1xuXG4gICAgcHJpc21hTW9jay5maWxlLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja0ZpbGUpO1xuICAgIHByaXNtYU1vY2sudXNlci5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVc2VyKTtcbiAgICBwcmlzbWFNb2NrLnVzZXIudXBkYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHsgLi4ubW9ja1VzZXIsIGNyZWRpdHM6IDkgfSk7XG4gICAgcHJpc21hTW9jay50cmFuc2xhdGlvbkhpc3RvcnkuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGlkOiAndGVzdC1oaXN0b3J5LWlkJyxcbiAgICAgIHVzZXJJZDogbW9ja1VzZXIuaWQsXG4gICAgICBmaWxlSWQ6IG1vY2tGaWxlLmlkLFxuICAgICAgc3RhdHVzOiBUcmFuc2xhdGlvblN0YXR1cy5DT01QTEVURUQsXG4gICAgfSk7XG5cbiAgICBtb2NrQW50aHJvcGljTWVzc2FnZXMuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGNvbnRlbnQ6IFt7IHRleHQ6ICfnv7voqLPjgZXjgozjgZ/jg4bjgq3jgrnjg4gnIH1dLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICB0ZXh0czogWydIZWxsbyddLFxuICAgICAgc291cmNlTGFuZzogTGFuZ3VhZ2UuRU4sXG4gICAgICB0YXJnZXRMYW5nOiBMYW5ndWFnZS5KQSxcbiAgICAgIG1vZGVsOiAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnLFxuICAgICAgZmlsZU5hbWU6ICd0ZXN0LnBwdHgnLFxuICAgICAgZmlsZUlkOiAndGVzdC1maWxlLWlkJyxcbiAgICAgIHNsaWRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgICAgdGV4dHM6IFt7IHRleHQ6ICdIZWxsbycsIGluZGV4OiAwIH1dLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gICAgY29uc3QgcmVxID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS90cmFuc2xhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcSk7XG4gICAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSgyMDApO1xuICAgIGV4cGVjdChyZXNwb25zZUJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICBleHBlY3QocmVzcG9uc2VCb2R5LnRyYW5zbGF0ZWRTbGlkZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICBleHBlY3QocmVzcG9uc2VCb2R5LnRyYW5zbGF0ZWRTbGlkZXNbMF0udHJhbnNsYXRpb25zWzBdLnRleHQpLnRvQmUoJ+e/u+ios+OBleOCjOOBn+ODhuOCreOCueODiCcpO1xuICAgIGV4cGVjdChwcmlzbWFNb2NrLnVzZXIudXBkYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICB3aGVyZTogeyBpZDogbW9ja1VzZXIuaWQgfSxcbiAgICAgIGRhdGE6IHsgY3JlZGl0czogeyBkZWNyZW1lbnQ6IDEgfSB9LFxuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiA0MDEgaWYgbm90IGF1dGhlbnRpY2F0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgZ2V0U2VydmVyU2Vzc2lvbk1vY2subW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICBjb25zdCByZXEgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL3RyYW5zbGF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe30pLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxKTtcbiAgICBjb25zdCByZXNwb25zZUJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlQm9keS5lcnJvcikudG9CZSgn6KqN6Ki844GM5b+F6KaB44Gn44GZJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIDQwMCBpZiBmaWxlSWQgaXMgbWlzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IGNyZWF0ZU1vY2tVc2VyKHsgaWQ6ICd0ZXN0LXVzZXItaWQnIH0pO1xuICAgIGdldFNlcnZlclNlc3Npb25Nb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcjogbW9ja1VzZXIgfSk7XG5cbiAgICBjb25zdCByZXEgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL3RyYW5zbGF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0ZXh0czogWydIZWxsbyddLFxuICAgICAgICBzb3VyY2VMYW5nOiBMYW5ndWFnZS5FTixcbiAgICAgICAgdGFyZ2V0TGFuZzogTGFuZ3VhZ2UuSkEsXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQT1NUKHJlcSk7XG4gICAgY29uc3QgcmVzcG9uc2VCb2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZSg0MDApO1xuICAgIGV4cGVjdChyZXNwb25zZUJvZHkuZXJyb3IpLnRvQmUoJ+ODleOCoeOCpOODq0lE44GM5b+F6KaB44Gn44GZJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBpZiBmaWxlIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IGNyZWF0ZU1vY2tVc2VyKHsgaWQ6ICd0ZXN0LXVzZXItaWQnIH0pO1xuICAgIGdldFNlcnZlclNlc3Npb25Nb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcjogbW9ja1VzZXIgfSk7XG5cbiAgICBwcmlzbWFNb2NrLmZpbGUuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgIGNvbnN0IHJlcSA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvdHJhbnNsYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRleHRzOiBbJ0hlbGxvJ10sXG4gICAgICAgIHNvdXJjZUxhbmc6IExhbmd1YWdlLkVOLFxuICAgICAgICB0YXJnZXRMYW5nOiBMYW5ndWFnZS5KQSxcbiAgICAgICAgZmlsZUlkOiAnbm9uLWV4aXN0ZW50LWZpbGUtaWQnLFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXEpO1xuICAgIGNvbnN0IHJlc3BvbnNlQm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICBleHBlY3QocmVzcG9uc2VCb2R5LmVycm9yKS50b0JlKCfmjIflrprjgZXjgozjgZ/jg5XjgqHjgqTjg6tJROOBjOODh+ODvOOCv+ODmeODvOOCueOBq+WtmOWcqOOBl+OBvuOBm+OCkycpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJldHVybiA0MDMgaWYgdXNlciBoYXMgaW5zdWZmaWNpZW50IGNyZWRpdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1VzZXIgPSBjcmVhdGVNb2NrVXNlcih7XG4gICAgICBpZDogJ3Rlc3QtdXNlci1pZCcsXG4gICAgICBjcmVkaXRzOiAwLFxuICAgIH0pO1xuXG4gICAgZ2V0U2VydmVyU2Vzc2lvbk1vY2subW9ja1Jlc29sdmVkVmFsdWUoeyB1c2VyOiBtb2NrVXNlciB9KTtcblxuICAgIGNvbnN0IG1vY2tGaWxlID0ge1xuICAgICAgaWQ6ICd0ZXN0LWZpbGUtaWQnLFxuICAgICAgbmFtZTogJ3Rlc3QucHB0eCcsXG4gICAgfTtcblxuICAgIHByaXNtYU1vY2suZmlsZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaWxlKTtcbiAgICBwcmlzbWFNb2NrLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG5cbiAgICBjb25zdCByZXEgPSBuZXcgTmV4dFJlcXVlc3QoJ2h0dHA6Ly9sb2NhbGhvc3QvYXBpL3RyYW5zbGF0ZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0ZXh0czogWydIZWxsbyddLFxuICAgICAgICBzb3VyY2VMYW5nOiBMYW5ndWFnZS5FTixcbiAgICAgICAgdGFyZ2V0TGFuZzogTGFuZ3VhZ2UuSkEsXG4gICAgICAgIGZpbGVJZDogJ3Rlc3QtZmlsZS1pZCcsXG4gICAgICAgIHNsaWRlczogW3sgaW5kZXg6IDAsIHRleHRzOiBbeyB0ZXh0OiAnSGVsbG8nLCBpbmRleDogMCB9XSB9XSxcbiAgICAgIH0pLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IFBPU1QocmVxKTtcbiAgICBjb25zdCByZXNwb25zZUJvZHkgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS50b0JlKDQwMyk7XG4gICAgZXhwZWN0KHJlc3BvbnNlQm9keS5lcnJvcikudG9CZSgn44Kv44Os44K444OD44OI44GM5LiN6Laz44GX44Gm44GE44G+44GZJyk7XG4gICAgZXhwZWN0KHJlc3BvbnNlQm9keS5hdmFpbGFibGVDcmVkaXRzKS50b0JlKDApO1xuICAgIGV4cGVjdChyZXNwb25zZUJvZHkucmVxdWlyZWRDcmVkaXRzKS50b0JlKDEpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IG1vZGVsIGZvciBub24tcHJlbWl1bSB1c2VycycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IGNyZWF0ZU1vY2tVc2VyKHtcbiAgICAgIGlkOiAndGVzdC11c2VyLWlkJyxcbiAgICAgIGlzUHJlbWl1bTogZmFsc2UsXG4gICAgICBjcmVkaXRzOiAxMCxcbiAgICB9KTtcblxuICAgIGdldFNlcnZlclNlc3Npb25Nb2NrLm1vY2tSZXNvbHZlZFZhbHVlKHsgdXNlcjogbW9ja1VzZXIgfSk7XG5cbiAgICBjb25zdCBtb2NrRmlsZSA9IHtcbiAgICAgIGlkOiAndGVzdC1maWxlLWlkJyxcbiAgICAgIG5hbWU6ICd0ZXN0LnBwdHgnLFxuICAgIH07XG5cbiAgICBwcmlzbWFNb2NrLmZpbGUuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRmlsZSk7XG4gICAgcHJpc21hTW9jay51c2VyLmZpbmRVbmlxdWUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VzZXIpO1xuICAgIHByaXNtYU1vY2sudXNlci51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyAuLi5tb2NrVXNlciwgY3JlZGl0czogOSB9KTtcbiAgICBtb2NrQW50aHJvcGljTWVzc2FnZXMuY3JlYXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgIGNvbnRlbnQ6IFt7IHRleHQ6ICfnv7voqLPjgZXjgozjgZ/jg4bjgq3jgrnjg4gnIH1dLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVxID0gbmV3IE5leHRSZXF1ZXN0KCdodHRwOi8vbG9jYWxob3N0L2FwaS90cmFuc2xhdGUnLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdGV4dHM6IFsnSGVsbG8nXSxcbiAgICAgICAgc291cmNlTGFuZzogTGFuZ3VhZ2UuRU4sXG4gICAgICAgIHRhcmdldExhbmc6IExhbmd1YWdlLkpBLFxuICAgICAgICBtb2RlbDogJ2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknLFxuICAgICAgICBmaWxlSWQ6ICd0ZXN0LWZpbGUtaWQnLFxuICAgICAgICBzbGlkZXM6IFt7IGluZGV4OiAwLCB0ZXh0czogW3sgdGV4dDogJ0hlbGxvJywgaW5kZXg6IDAgfV0gfV0sXG4gICAgICB9KSxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgIH0pO1xuXG4gICAgYXdhaXQgUE9TVChyZXEpO1xuXG4gICAgZXhwZWN0KG1vY2tBbnRocm9waWNNZXNzYWdlcy5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBtb2RlbDogJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3JyxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgdHJhbnNsYXRpb24gQVBJIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2NrVXNlciA9IGNyZWF0ZU1vY2tVc2VyKHtcbiAgICAgIGlkOiAndGVzdC11c2VyLWlkJyxcbiAgICAgIGNyZWRpdHM6IDEwLFxuICAgIH0pO1xuXG4gICAgZ2V0U2VydmVyU2Vzc2lvbk1vY2subW9ja1Jlc29sdmVkVmFsdWUoeyB1c2VyOiBtb2NrVXNlciB9KTtcblxuICAgIGNvbnN0IG1vY2tGaWxlID0ge1xuICAgICAgaWQ6ICd0ZXN0LWZpbGUtaWQnLFxuICAgICAgbmFtZTogJ3Rlc3QucHB0eCcsXG4gICAgfTtcblxuICAgIHByaXNtYU1vY2suZmlsZS5maW5kVW5pcXVlLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tGaWxlKTtcbiAgICBwcmlzbWFNb2NrLnVzZXIuZmluZFVuaXF1ZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVXNlcik7XG4gICAgbW9ja0FudGhyb3BpY01lc3NhZ2VzLmNyZWF0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0FQSSBFcnJvcicpKTtcblxuICAgIGNvbnN0IHJlcSA9IG5ldyBOZXh0UmVxdWVzdCgnaHR0cDovL2xvY2FsaG9zdC9hcGkvdHJhbnNsYXRlJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHRleHRzOiBbJ0hlbGxvJ10sXG4gICAgICAgIHNvdXJjZUxhbmc6IExhbmd1YWdlLkVOLFxuICAgICAgICB0YXJnZXRMYW5nOiBMYW5ndWFnZS5KQSxcbiAgICAgICAgZmlsZUlkOiAndGVzdC1maWxlLWlkJyxcbiAgICAgICAgc2xpZGVzOiBbeyBpbmRleDogMCwgdGV4dHM6IFt7IHRleHQ6ICdIZWxsbycsIGluZGV4OiAwIH1dIH1dLFxuICAgICAgfSksXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUE9TVChyZXEpO1xuICAgIGNvbnN0IHJlc3BvbnNlQm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNTAwKTtcbiAgICBleHBlY3QocmVzcG9uc2VCb2R5LmVycm9yKS50b0JlKCfnv7voqLPjgavlpLHmlZfjgZfjgb7jgZfjgZ8nKTtcbiAgICBleHBlY3QocHJpc21hTW9jay50cmFuc2xhdGlvbkhpc3RvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgc3RhdHVzOiBUcmFuc2xhdGlvblN0YXR1cy5GQUlMRUQsXG4gICAgICAgIGVycm9yTWVzc2FnZTogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn0pOyAiXSwibmFtZXMiOlsiamVzdCIsIm1vY2siLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZm4iLCJtb2NrQ29uc29sZUxvZyIsInNweU9uIiwiY29uc29sZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm1vY2tDb25zb2xlRXJyb3IiLCJwcmlzbWFNb2NrIiwiY3JlYXRlUHJpc21hTW9jayIsImdldFNlcnZlclNlc3Npb25Nb2NrIiwiZGVzY3JpYmUiLCJtb2NrQW50aHJvcGljTWVzc2FnZXMiLCJjcmVhdGUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsIkFudGhyb3BpYyIsIm1lc3NhZ2VzIiwiYWZ0ZXJFYWNoIiwibW9ja0NsZWFyIiwiaXQiLCJtb2NrVXNlciIsImNyZWF0ZU1vY2tVc2VyIiwiaWQiLCJpc1ByZW1pdW0iLCJjcmVkaXRzIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1c2VyIiwibW9ja0ZpbGUiLCJuYW1lIiwiZmlsZSIsImZpbmRVbmlxdWUiLCJ1cGRhdGUiLCJ0cmFuc2xhdGlvbkhpc3RvcnkiLCJ1c2VySWQiLCJmaWxlSWQiLCJzdGF0dXMiLCJUcmFuc2xhdGlvblN0YXR1cyIsIkNPTVBMRVRFRCIsImNvbnRlbnQiLCJ0ZXh0IiwicmVxdWVzdEJvZHkiLCJ0ZXh0cyIsInNvdXJjZUxhbmciLCJMYW5ndWFnZSIsIkVOIiwidGFyZ2V0TGFuZyIsIkpBIiwibW9kZWwiLCJmaWxlTmFtZSIsInNsaWRlcyIsImluZGV4IiwicmVxIiwiTmV4dFJlcXVlc3QiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJyZXNwb25zZSIsIlBPU1QiLCJyZXNwb25zZUJvZHkiLCJqc29uIiwiZXhwZWN0IiwidG9CZSIsInN1Y2Nlc3MiLCJ0cmFuc2xhdGVkU2xpZGVzIiwidG9IYXZlTGVuZ3RoIiwidHJhbnNsYXRpb25zIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJ3aGVyZSIsImRhdGEiLCJkZWNyZW1lbnQiLCJlcnJvciIsImF2YWlsYWJsZUNyZWRpdHMiLCJyZXF1aXJlZENyZWRpdHMiLCJvYmplY3RDb250YWluaW5nIiwibW9ja1JlamVjdGVkVmFsdWUiLCJFcnJvciIsIkZBSUxFRCIsImVycm9yTWVzc2FnZSIsImFueSIsIlN0cmluZyJdLCJtYXBwaW5ncyI6IjtBQU9BLG9CQUFvQjtBQUNwQkEsS0FBS0MsSUFBSSxDQUFDO0FBRVYsdUJBQXVCO0FBQ3ZCRCxLQUFLQyxJQUFJLENBQUMsYUFBYSxJQUFPLENBQUE7UUFDNUJDLGtCQUFrQkYsS0FBS0csRUFBRTtJQUMzQixDQUFBOzs7Ozt1QkFicUI7d0JBQ087MEJBQ0s7d0JBQ1c7MkJBQ29COzhEQUMxQztBQVV0QixrQkFBa0I7QUFDbEIsTUFBTUMsaUJBQWlCSixLQUFLSyxLQUFLLENBQUNDLFNBQVMsT0FBT0Msa0JBQWtCO0FBQ3BFLE1BQU1DLG1CQUFtQlIsS0FBS0ssS0FBSyxDQUFDQyxTQUFTLFNBQVNDLGtCQUFrQjtBQUV4RSxNQUFNRSxhQUFhQyxJQUFBQSwyQkFBZ0I7QUFDbkMsTUFBTUMsdUJBQXVCVCwwQkFBZ0I7QUFFN0NVLFNBQVMsdUJBQXVCO0lBQzlCLE1BQU1DLHdCQUF3QjtRQUM1QkMsUUFBUWQsS0FBS0csRUFBRTtJQUNqQjtJQUVBWSxXQUFXO1FBQ1RDLElBQUFBLHdCQUFhO1FBQ2JDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLEdBQUc7UUFDL0JDLFlBQVMsQ0FBZWIsa0JBQWtCLENBQUMsSUFBTyxDQUFBO2dCQUNqRGMsVUFBVVI7WUFDWixDQUFBO0lBQ0Y7SUFFQVMsVUFBVTtRQUNSbEIsZUFBZW1CLFNBQVM7UUFDeEJmLGlCQUFpQmUsU0FBUztJQUM1QjtJQUVBQyxHQUFHLHNDQUFzQztR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