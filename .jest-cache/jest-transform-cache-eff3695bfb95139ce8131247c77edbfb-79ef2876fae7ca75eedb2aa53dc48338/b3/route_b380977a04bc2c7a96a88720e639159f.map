{"version":3,"sources":["/Users/yusuketsunoda/Documents/cursor/ppttranslatorapp/worktrees/cicd-setup/app/api/profile/update/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { getServerSession } from 'next-auth/next';\nimport { authOptions } from '@/lib/auth/auth-options';\nimport { prisma } from '@/lib/db/prisma';\n\nexport async function POST(req: Request) {\n  try {\n    const session = await getServerSession(authOptions);\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: '認証が必要です' }, { status: 401 });\n    }\n\n    const { name } = await req.json();\n    if (!name) {\n      return NextResponse.json({ error: '名前は必須です' }, { status: 400 });\n    }\n\n    const updatedUser = await prisma.user.update({\n      where: { id: session.user.id },\n      data: {\n        name,\n        updatedAt: new Date(),\n      },\n    });\n\n    return NextResponse.json({\n      success: true,\n      user: {\n        id: updatedUser.id,\n        name: updatedUser.name,\n        email: updatedUser.email,\n      },\n    });\n  } catch (error) {\n    console.error('Profile update error:', error);\n    return NextResponse.json({ error: 'プロフィールの更新に失敗しました' }, { status: 500 });\n  }\n}\n"],"names":["POST","req","session","getServerSession","authOptions","user","id","NextResponse","json","error","status","name","updatedUser","prisma","update","where","data","updatedAt","Date","success","email","console"],"mappings":";;;;+BAKsBA;;;eAAAA;;;wBALO;sBACI;6BACL;wBACL;AAEhB,eAAeA,KAAKC,GAAY;IACrC,IAAI;YAEGC;QADL,MAAMA,UAAU,MAAMC,IAAAA,sBAAgB,EAACC,wBAAW;QAClD,IAAI,EAACF,oBAAAA,+BAAAA,gBAAAA,QAASG,IAAI,cAAbH,oCAAAA,cAAeI,EAAE,GAAE;YACtB,OAAOC,oBAAY,CAACC,IAAI,CAAC;gBAAEC,OAAO;YAAU,GAAG;gBAAEC,QAAQ;YAAI;QAC/D;QAEA,MAAM,EAAEC,IAAI,EAAE,GAAG,MAAMV,IAAIO,IAAI;QAC/B,IAAI,CAACG,MAAM;YACT,OAAOJ,oBAAY,CAACC,IAAI,CAAC;gBAAEC,OAAO;YAAU,GAAG;gBAAEC,QAAQ;YAAI;QAC/D;QAEA,MAAME,cAAc,MAAMC,cAAM,CAACR,IAAI,CAACS,MAAM,CAAC;YAC3CC,OAAO;gBAAET,IAAIJ,QAAQG,IAAI,CAACC,EAAE;YAAC;YAC7BU,MAAM;gBACJL;gBACAM,WAAW,IAAIC;YACjB;QACF;QAEA,OAAOX,oBAAY,CAACC,IAAI,CAAC;YACvBW,SAAS;YACTd,MAAM;gBACJC,IAAIM,YAAYN,EAAE;gBAClBK,MAAMC,YAAYD,IAAI;gBACtBS,OAAOR,YAAYQ,KAAK;YAC1B;QACF;IACF,EAAE,OAAOX,OAAO;QACdY,QAAQZ,KAAK,CAAC,yBAAyBA;QACvC,OAAOF,oBAAY,CAACC,IAAI,CAAC;YAAEC,OAAO;QAAmB,GAAG;YAAEC,QAAQ;QAAI;IACxE;AACF"}